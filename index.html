<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://110.41.172.90/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://110.41.172.90"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-spring-security-增加登录和安全保护" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/11/spring-security-%E5%A2%9E%E5%8A%A0%E7%99%BB%E5%BD%95%E5%92%8C%E5%AE%89%E5%85%A8%E4%BF%9D%E6%8A%A4/" class="article-date">
  <time class="dt-published" datetime="2023-05-11T09:03:59.000Z" itemprop="datePublished">2023-05-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/05/11/spring-security-%E5%A2%9E%E5%8A%A0%E7%99%BB%E5%BD%95%E5%92%8C%E5%AE%89%E5%85%A8%E4%BF%9D%E6%8A%A4/">spring security 增加登录和安全保护</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="spring-security-增加登录和安全保护"><a href="#spring-security-增加登录和安全保护" class="headerlink" title="spring security 增加登录和安全保护"></a>spring security 增加登录和安全保护</h3><h4 id="详细教程"><a href="#详细教程" class="headerlink" title="详细教程"></a>详细教程</h4><p><a target="_blank" rel="noopener" href="https://github.com/PotoYang/spring-in-action-v5-translate/tree/master/di-4-zhang-spring-an-quan">spring in action Spring 入门详细教程请参考：https://github.com/PotoYang/spring-in-action-v5-translate/tree/master/di-4-zhang-spring-an-quan</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/PotoYang/spring-in-action-v5-translate/tree/master/spring-in-action-5-samples-master">源码如下：https://github.com/PotoYang/spring-in-action-v5-translate/tree/master/spring-in-action-5-samples-master</a></p>
<h4 id="将要做的事情"><a href="#将要做的事情" class="headerlink" title="将要做的事情"></a>将要做的事情</h4><ul>
<li>自动配置 Spring Security</li>
<li>自定义用户存储</li>
<li>自定义登录页面</li>
</ul>
<h4 id="开始之前的事情"><a href="#开始之前的事情" class="headerlink" title="开始之前的事情"></a>开始之前的事情</h4><p>增加依赖</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<h4 id="增加依赖后启动项目"><a href="#增加依赖后启动项目" class="headerlink" title="增加依赖后启动项目"></a>增加依赖后启动项目</h4><p>在控制台console中将打印类似的<br><code>Using default security password: 087cfc6a-027d-44bc-95d7-cbb3a798a1ea</code><br>再访问项目就需要登录，用户名是 <code>user</code>,密码是控制台中打印的 <code>087cfc6a-027d-44bc-95d7-cbb3a798a1ea</code><br>现在只有 <code>user</code> 用户能够使用你的项目</p>
<h4 id="配置Spring-Security"><a href="#配置Spring-Security" class="headerlink" title="配置Spring Security"></a>配置Spring Security</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">package tacos.security;</span><br><span class="line">​</span><br><span class="line">import org.springframework.context.annotation.Bean;</span><br><span class="line">import org.springframework.context.annotation.Configuration;</span><br><span class="line">import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;</span><br><span class="line">import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;</span><br><span class="line">​</span><br><span class="line">@Configuration</span><br><span class="line">@EnableWebSecurity</span><br><span class="line">public class SecurityConfig extends WebSecurityConfigurerAdapter &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>内存储存用户，可以用于测试</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">protected void configure(AuthenticationManagerBuilder auth) throws Exception &#123;</span><br><span class="line">    auth</span><br><span class="line">        .inMemoryAuthentication()</span><br><span class="line">            .withUser(&quot;buzz&quot;)</span><br><span class="line">                .password(&quot;infinity&quot;)</span><br><span class="line">                .authorities(&quot;ROLE_USER&quot;)</span><br><span class="line">            .and()</span><br><span class="line">            .withUser(&quot;woody&quot;)</span><br><span class="line">                .password(&quot;bullseye&quot;)</span><br><span class="line">                .authorities(&quot;ROLE_USER&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在使用spring security 5.x 时 password需要编码，不想编码可以使用{noop},例如</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">protected void configure(AuthenticationManagerBuilder auth) throws Exception &#123;</span><br><span class="line">    auth</span><br><span class="line">        .inMemoryAuthentication()</span><br><span class="line">            .withUser(&quot;buzz&quot;)</span><br><span class="line">                .password(&quot;&#123;noop&#125;infinity&quot;)</span><br><span class="line">                .authorities(&quot;ROLE_USER&quot;)</span><br><span class="line">            .and()</span><br><span class="line">            .withUser(&quot;woody&quot;)</span><br><span class="line">                .password(&quot;&#123;noop&#125;bullseye&quot;)</span><br><span class="line">                .authorities(&quot;ROLE_USER&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="自定义用户身份验证"><a href="#自定义用户身份验证" class="headerlink" title="自定义用户身份验证"></a>自定义用户身份验证</h4><h5 id="创建User-类"><a href="#创建User-类" class="headerlink" title="创建User 类"></a>创建User 类</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">package tacos;</span><br><span class="line"></span><br><span class="line">import java.util.Arrays;</span><br><span class="line">import java.util.Collection;</span><br><span class="line">import javax.persistence.Entity;</span><br><span class="line">import javax.persistence.GeneratedValue;</span><br><span class="line">import javax.persistence.GenerationType;</span><br><span class="line">import javax.persistence.Id;</span><br><span class="line">import org.springframework.security.core.GrantedAuthority;</span><br><span class="line">import org.springframework.security.core.authority.SimpleGrantedAuthority;</span><br><span class="line">import org.springframework.security.core.userdetails.UserDetails;</span><br><span class="line">import lombok.AccessLevel;</span><br><span class="line">import lombok.Data;</span><br><span class="line">import lombok.NoArgsConstructor;</span><br><span class="line">import lombok.RequiredArgsConstructor;</span><br><span class="line"></span><br><span class="line">@Entity</span><br><span class="line">@Data</span><br><span class="line">@NoArgsConstructor(access=AccessLevel.PRIVATE, force=true)</span><br><span class="line">@RequiredArgsConstructor</span><br><span class="line">public class User implements UserDetails &#123;</span><br><span class="line">    private static final long serialVersionUID = 1L;</span><br><span class="line">    </span><br><span class="line">    @Id</span><br><span class="line">    @GeneratedValue(strategy=GenerationType.AUTO)</span><br><span class="line">    private Long id;</span><br><span class="line">    </span><br><span class="line">    private final String username;</span><br><span class="line">    private final String password;</span><br><span class="line">    private final String fullname;</span><br><span class="line">    private final String street;</span><br><span class="line">    private final String city;</span><br><span class="line">    private final String state;</span><br><span class="line">    private final String zip;</span><br><span class="line">    private final String phoneNumber;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() &#123;</span><br><span class="line">        return Arrays.asList(new SimpleGrantedAuthority(&quot;ROLE_USER&quot;));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public boolean isAccountNonExpired() &#123;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public boolean isAccountNonLocked() &#123;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public boolean isCredentialsNonExpired() &#123;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public boolean isEnabled() &#123;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="创建UserRepository"><a href="#创建UserRepository" class="headerlink" title="创建UserRepository"></a>创建UserRepository</h5><p>从数据库中来获取用户，保存用户</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">package tacos.data;</span><br><span class="line">import org.springframework.data.repository.CrudRepository;</span><br><span class="line">import tacos.User;</span><br><span class="line"></span><br><span class="line">public interface UserRepository extends CrudRepository&lt;User, Long&gt; &#123;</span><br><span class="line">    User findByUsername(String username);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="实现Spring-Security-的-UserDetailsService接口"><a href="#实现Spring-Security-的-UserDetailsService接口" class="headerlink" title="实现Spring Security 的 UserDetailsService接口"></a>实现Spring Security 的 UserDetailsService接口</h5><p>UserDetailsService接口的实现是给定一个用户的用户名，期望返回一个 UserDetails 对象，如果给定的用户名没有显示任何结果，则抛出一个 UsernameNotFoundException。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">package tacos.security;</span><br><span class="line"></span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.security.core.userdetails.UserDetails;</span><br><span class="line">import org.springframework.security.core.userdetails.UserDetailsService;</span><br><span class="line">import org.springframework.security.core.userdetails.UsernameNotFoundException;</span><br><span class="line">import org.springframework.stereotype.Service;</span><br><span class="line">import tacos.User;</span><br><span class="line">import tacos.data.UserRepository;</span><br><span class="line"></span><br><span class="line">@Service</span><br><span class="line">public class UserRepositoryUserDetailsService implements UserDetailsService &#123;</span><br><span class="line">    </span><br><span class="line">    private UserRepository userRepo;</span><br><span class="line">    </span><br><span class="line">    @Autowired</span><br><span class="line">    public UserRepositoryUserDetailsService(UserRepository userRepo) &#123;</span><br><span class="line">        this.userRepo = userRepo;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public UserDetails loadUserByUsername(String username)</span><br><span class="line">        throws UsernameNotFoundException &#123;</span><br><span class="line">        User user = userRepo.findByUsername(username);</span><br><span class="line">        if (user != null) &#123;</span><br><span class="line">            return user;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        throw new UsernameNotFoundException(&quot;User &#x27;&quot; + username + &quot;&#x27; not found&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="spring-security-配置类中-添加userDetailsService"><a href="#spring-security-配置类中-添加userDetailsService" class="headerlink" title="spring security 配置类中 添加userDetailsService"></a>spring security 配置类中 添加userDetailsService</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@Bean</span><br><span class="line">public PasswordEncoder encoder() &#123;</span><br><span class="line">    return new StandardPasswordEncoder(&quot;53cr3t&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">protected void configure(AuthenticationManagerBuilder auth) throws Exception &#123;</span><br><span class="line">    auth</span><br><span class="line">        .userDetailsService(userDetailsService)</span><br><span class="line">        .passwordEncoder(encoder());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="处理用户注册"><a href="#处理用户注册" class="headerlink" title="处理用户注册"></a>处理用户注册</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">package tacos.security;</span><br><span class="line"></span><br><span class="line">import org.springframework.security.crypto.password.PasswordEncoder;</span><br><span class="line">import org.springframework.stereotype.Controller;</span><br><span class="line">import org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line">import tacos.data.UserRepository;</span><br><span class="line"></span><br><span class="line">@Controller</span><br><span class="line">@RequestMapping(&quot;/register&quot;)</span><br><span class="line">public class RegistrationController &#123;</span><br><span class="line">    </span><br><span class="line">    private UserRepository userRepo;</span><br><span class="line">    private PasswordEncoder passwordEncoder;</span><br><span class="line">    </span><br><span class="line">    public RegistrationController(</span><br><span class="line">        UserRepository userRepo, PasswordEncoder passwordEncoder) &#123;</span><br><span class="line">        this.userRepo = userRepo;</span><br><span class="line">        this.passwordEncoder = passwordEncoder;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    @GetMapping</span><br><span class="line">    public String registerForm() &#123;</span><br><span class="line">        return &quot;registration&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    @PostMapping</span><br><span class="line">    public String processRegistration(RegistrationForm form) &#123;</span><br><span class="line">        userRepo.save(form.toUser(passwordEncoder));</span><br><span class="line">        return &quot;redirect:/login&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;</span><br><span class="line">      xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;title&gt;Taco Cloud&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;h1&gt;Register&lt;/h1&gt;</span><br><span class="line">        &lt;img th:src=&quot;@&#123;/images/TacoCloud.png&#125;&quot;/&gt;</span><br><span class="line">        </span><br><span class="line">        &lt;form method=&quot;POST&quot; th:action=&quot;@&#123;/register&#125;&quot; id=&quot;registerForm&quot;&gt;</span><br><span class="line">            </span><br><span class="line">            &lt;label for=&quot;username&quot;&gt;Username: &lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;text&quot; name=&quot;username&quot;/&gt;&lt;br/&gt;</span><br><span class="line">            </span><br><span class="line">            &lt;label for=&quot;password&quot;&gt;Password: &lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;password&quot; name=&quot;password&quot;/&gt;&lt;br/&gt;</span><br><span class="line">            </span><br><span class="line">            &lt;label for=&quot;confirm&quot;&gt;Confirm password: &lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;password&quot; name=&quot;confirm&quot;/&gt;&lt;br/&gt;</span><br><span class="line">            </span><br><span class="line">            &lt;label for=&quot;fullname&quot;&gt;Full name: &lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;text&quot; name=&quot;fullname&quot;/&gt;&lt;br/&gt;</span><br><span class="line">            </span><br><span class="line">            &lt;label for=&quot;street&quot;&gt;Street: &lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;text&quot; name=&quot;street&quot;/&gt;&lt;br/&gt;</span><br><span class="line">            </span><br><span class="line">            &lt;label for=&quot;city&quot;&gt;City: &lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;text&quot; name=&quot;city&quot;/&gt;&lt;br/&gt;</span><br><span class="line">            </span><br><span class="line">            &lt;label for=&quot;state&quot;&gt;State: &lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;text&quot; name=&quot;state&quot;/&gt;&lt;br/&gt;</span><br><span class="line">            </span><br><span class="line">            &lt;label for=&quot;zip&quot;&gt;Zip: &lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;text&quot; name=&quot;zip&quot;/&gt;&lt;br/&gt;</span><br><span class="line">            </span><br><span class="line">            &lt;label for=&quot;phone&quot;&gt;Phone: &lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;text&quot; name=&quot;phone&quot;/&gt;&lt;br/&gt;</span><br><span class="line">            </span><br><span class="line">            &lt;input type=&quot;submit&quot; value=&quot;Register&quot;/&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">package tacos.security;</span><br><span class="line"></span><br><span class="line">import org.springframework.security.crypto.password.PasswordEncoder;</span><br><span class="line">import lombok.Data;</span><br><span class="line">import tacos.User;</span><br><span class="line"></span><br><span class="line">@Data</span><br><span class="line">public class RegistrationForm &#123;</span><br><span class="line">    </span><br><span class="line">    private String username;</span><br><span class="line">    private String password;</span><br><span class="line">    private String fullname;</span><br><span class="line">    private String street;</span><br><span class="line">    private String city;</span><br><span class="line">    private String state;</span><br><span class="line">    private String zip;</span><br><span class="line">    private String phone;</span><br><span class="line">    </span><br><span class="line">    public User toUser(PasswordEncoder passwordEncoder) &#123;</span><br><span class="line">        return new User(</span><br><span class="line">            username, passwordEncoder.encode(password),</span><br><span class="line">            fullname, street, city, state, zip, phone);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="处理web-请求"><a href="#处理web-请求" class="headerlink" title="处理web 请求"></a>处理web 请求</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">@Override</span><br><span class="line">protected void configure(HttpSecurity http) throws Exception &#123;</span><br><span class="line">    http</span><br><span class="line">            .authorizeRequests()</span><br><span class="line">            .antMatchers(&quot;/design&quot;, &quot;/orders&quot;)</span><br><span class="line">            .access(&quot;hasRole(&#x27;ROLE_USER&#x27;)&quot;)</span><br><span class="line">            .antMatchers(&quot;/&quot;, &quot;/**&quot;).access(&quot;permitAll&quot;)</span><br><span class="line">            .and()</span><br><span class="line">            .formLogin()</span><br><span class="line">            .loginPage(&quot;/login&quot;)</span><br><span class="line">            .and()</span><br><span class="line">            .logout()</span><br><span class="line">            .logoutSuccessUrl(&quot;/&quot;)</span><br><span class="line">            .and()</span><br><span class="line">            .csrf()</span><br><span class="line">            .ignoringAntMatchers(&quot;/h2-console/**&quot;)</span><br><span class="line">            .and()</span><br><span class="line">            .headers()</span><br><span class="line">            .frameOptions()</span><br><span class="line">            .sameOrigin()</span><br><span class="line">    ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>处理用户登录</p>
<p>注册login controller</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">public void addViewControllers(ViewControllerRegistry registry) &#123;</span><br><span class="line">    registry.addViewController(&quot;/&quot;).setViewName(&quot;home&quot;);</span><br><span class="line">    registry.addViewController(&quot;/login&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>添加login.html</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;</span><br><span class="line">      xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;title&gt;Taco Cloud&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;h1&gt;Login&lt;/h1&gt;</span><br><span class="line">        &lt;img th:src=&quot;@&#123;/images/TacoCloud.png&#125;&quot;/&gt;</span><br><span class="line">        </span><br><span class="line">        &lt;div th:if=&quot;$&#123;error&#125;&quot;&gt;</span><br><span class="line">            Unable to login. Check your username and password.</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        </span><br><span class="line">        &lt;p&gt;New here? Click&lt;a th:href=&quot;@&#123;/register&#125;&quot;&gt;here&lt;/a&gt; to register.&lt;/p&gt;</span><br><span class="line">        &lt;!-- tag::thAction[] --&gt;</span><br><span class="line">        &lt;form method=&quot;POST&quot; th:action=&quot;@&#123;/login&#125;&quot; id=&quot;loginForm&quot;&gt;</span><br><span class="line">        &lt;!-- end::thAction[] --&gt;</span><br><span class="line">            &lt;label for=&quot;username&quot;&gt;Username: &lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;text&quot; name=&quot;username&quot; id=&quot;username&quot; /&gt;&lt;br/&gt;</span><br><span class="line">            </span><br><span class="line">            &lt;label for=&quot;password&quot;&gt;Password: &lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;password&quot; name=&quot;password&quot; id=&quot;password&quot; /&gt;&lt;br/&gt;</span><br><span class="line">            </span><br><span class="line">            &lt;input type=&quot;submit&quot; value=&quot;Login&quot;/&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://110.41.172.90/2023/05/11/spring-security-%E5%A2%9E%E5%8A%A0%E7%99%BB%E5%BD%95%E5%92%8C%E5%AE%89%E5%85%A8%E4%BF%9D%E6%8A%A4/" data-id="clhixaaf3000bzgul3yescx0g" data-title="spring security 增加登录和安全保护" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-in-Action/" rel="tag">Spring in Action</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-spring-data-jpa-数据处理" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/11/spring-data-jpa-%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/" class="article-date">
  <time class="dt-published" datetime="2023-05-11T08:38:48.000Z" itemprop="datePublished">2023-05-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/05/11/spring-data-jpa-%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/">spring data jpa 数据处理</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="spring-data-jpa-数据处理"><a href="#spring-data-jpa-数据处理" class="headerlink" title="spring data jpa 数据处理"></a>spring data jpa 数据处理</h3><h4 id="详细教程"><a href="#详细教程" class="headerlink" title="详细教程"></a>详细教程</h4><p><a target="_blank" rel="noopener" href="https://github.com/PotoYang/spring-in-action-v5-translate/tree/master/di-3-zhang-chu-li-shu-ju">spring in action Spring 入门详细教程请参考：https://github.com/PotoYang/spring-in-action-v5-translate/tree/master/di-3-zhang-chu-li-shu-ju</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/PotoYang/spring-in-action-v5-translate/tree/master/spring-in-action-5-samples-master">源码如下：https://github.com/PotoYang/spring-in-action-v5-translate/tree/master/spring-in-action-5-samples-master</a></p>
<h4 id="将要做的事情"><a href="#将要做的事情" class="headerlink" title="将要做的事情"></a>将要做的事情</h4><ul>
<li>将taco 和 order 数据保存到数据库中</li>
</ul>
<h4 id="开始之前的事情"><a href="#开始之前的事情" class="headerlink" title="开始之前的事情"></a>开始之前的事情</h4><p>引入依赖</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.h2database&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;h2&lt;/artifactId&gt;</span><br><span class="line">    &lt;scope&gt;runtime&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<p>这里使用h2数据库<br>Spring Data JPA 可用于具有 JPA starter 的 Spring Boot 应用程序。上面 starter 依赖不仅带来了 Spring Data JPA，还包括 Hibernate 作为 JPA 的实现：</p>
<blockquote>
<p>import 如果想使用不同的 JPA 实现，那么至少需要排除 Hibernate 依赖，并包含所选择的 JPA 库。例如，要使用 EclipseLink 而不是 Hibernate，需要按如下方式更改构建：</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;</span><br><span class="line">    &lt;exclusions&gt;</span><br><span class="line">        &lt;exclusion&gt;</span><br><span class="line">            &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;</span><br><span class="line">            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;</span><br><span class="line">        &lt;/exclusion&gt;</span><br><span class="line">    &lt;/exclusions&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">​</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.eclipse.persistence&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;eclipselink&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.5.2&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<h4 id="注解域作为实体"><a href="#注解域作为实体" class="headerlink" title="注解域作为实体"></a>注解域作为实体</h4><p>将Ingredient 改为如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">package tacos;</span><br><span class="line">​</span><br><span class="line">import javax.persistence.Entity;</span><br><span class="line">import javax.persistence.Id;</span><br><span class="line">import lombok.AccessLevel;</span><br><span class="line">import lombok.Data;</span><br><span class="line">import lombok.NoArgsConstructor;</span><br><span class="line">import lombok.RequiredArgsConstructor;</span><br><span class="line">​</span><br><span class="line">@Data</span><br><span class="line">@RequiredArgsConstructor</span><br><span class="line">@NoArgsConstructor(access=AccessLevel.PRIVATE, force=true)</span><br><span class="line">@Entity</span><br><span class="line">public class Ingredient &#123;</span><br><span class="line">    @Id</span><br><span class="line">    private final String id;</span><br><span class="line">    private final String name;</span><br><span class="line">    private final Type type;</span><br><span class="line">    </span><br><span class="line">    public static enum Type &#123;</span><br><span class="line">        WRAP, PROTEIN, VEGGIES, CHEESE, SAUCE</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>为了将其声明为 JPA 实体，必须使用 @Entity 注解。它的 id 属性必须使用 @Id 进行注解，以便将其指定为惟一标识数据库中实体的属性。</p>
<p>除了特定于 JPA 的注解之外，还在类级别上添加了 @NoArgsConstructor 注解。JPA 要求实体有一个无参构造函数，所以 Lombok 的 @NoArgsConstructor 实现了这一点。但是要是不希望使用它，可以通过将 access 属性设置为 AccessLevel.PRIVATE 来将其设置为私有。因为必须设置 final 属性，所以还要将 force 属性设置为 true，这将导致 Lombok 生成的构造函数将它们设置为 null。</p>
<p>还添加了一个 @RequiredArgsConstructor。@Data 隐式地添加了一个必需的有参构造函数，但是当使用 @NoArgsConstructor 时，该构造函数将被删除。显式的 @RequiredArgsConstructor 确保除了私有无参数构造函数外，仍然有一个必需有参构造函数。</p>
<h6 id="注解Taco"><a href="#注解Taco" class="headerlink" title="注解Taco"></a>注解Taco</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">package tacos;</span><br><span class="line">​</span><br><span class="line">import java.util.Date;</span><br><span class="line">import java.util.List;</span><br><span class="line">import javax.persistence.Entity;</span><br><span class="line">import javax.persistence.GeneratedValue;</span><br><span class="line">import javax.persistence.GenerationType;</span><br><span class="line">import javax.persistence.Id;</span><br><span class="line">import javax.persistence.ManyToMany;</span><br><span class="line">import javax.persistence.OneToMany;</span><br><span class="line">import javax.persistence.PrePersist;</span><br><span class="line">import javax.validation.constraints.NotNull;</span><br><span class="line">import javax.validation.constraints.Size;</span><br><span class="line">import lombok.Data;</span><br><span class="line">​</span><br><span class="line">@Data</span><br><span class="line">@Entity</span><br><span class="line">public class Taco &#123;</span><br><span class="line">    </span><br><span class="line">    @Id</span><br><span class="line">    @GeneratedValue(strategy=GenerationType.AUTO)</span><br><span class="line">    private Long id;</span><br><span class="line">    </span><br><span class="line">    @NotNull</span><br><span class="line">    @Size(min=5, message=&quot;Name must be at least 5 characters long&quot;)</span><br><span class="line">    private String name;</span><br><span class="line">    </span><br><span class="line">    private Date createdAt;</span><br><span class="line">    </span><br><span class="line">    @ManyToMany(targetEntity=Ingredient.class)</span><br><span class="line">    @Size(min=1, message=&quot;You must choose at least 1 ingredient&quot;)</span><br><span class="line">    private List&lt;Ingredient&gt; ingredients;</span><br><span class="line">    </span><br><span class="line">    @PrePersist</span><br><span class="line">    void createdAt() &#123;</span><br><span class="line">        this.createdAt = new Date();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>@PrePersist 注解。将使用它将 createdAt 属性设置为保存 Taco 之前的当前日期和时间。</p>
<h6 id="注解Order"><a href="#注解Order" class="headerlink" title="注解Order"></a>注解Order</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">package tacos;</span><br><span class="line">​</span><br><span class="line">import java.io.Serializable;</span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Date;</span><br><span class="line">import java.util.List;</span><br><span class="line">import javax.persistence.Entity;</span><br><span class="line">import javax.persistence.GeneratedValue;</span><br><span class="line">import javax.persistence.GenerationType;</span><br><span class="line">import javax.persistence.Id;</span><br><span class="line">import javax.persistence.ManyToMany;</span><br><span class="line">import javax.persistence.OneToMany;</span><br><span class="line">import javax.persistence.PrePersist;</span><br><span class="line">import javax.persistence.Table;</span><br><span class="line">import javax.validation.constraints.Digits;</span><br><span class="line">import javax.validation.constraints.Pattern;</span><br><span class="line">import org.hibernate.validator.constraints.CreditCardNumber;</span><br><span class="line">import org.hibernate.validator.constraints.NotBlank;</span><br><span class="line">import lombok.Data;</span><br><span class="line">​</span><br><span class="line">@Data</span><br><span class="line">@Entity</span><br><span class="line">@Table(name=&quot;Taco_Order&quot;)</span><br><span class="line">public class Order implements Serializable &#123;</span><br><span class="line">    private static final long serialVersionUID = 1L;</span><br><span class="line">    </span><br><span class="line">    @Id</span><br><span class="line">    @GeneratedValue(strategy=GenerationType.AUTO)</span><br><span class="line">    private Long id;</span><br><span class="line">    </span><br><span class="line">    private Date placedAt;</span><br><span class="line">    </span><br><span class="line">    ...</span><br><span class="line">    </span><br><span class="line">    @ManyToMany(targetEntity=Taco.class)</span><br><span class="line">    private List&lt;Taco&gt; tacos = new ArrayList&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    public void addDesign(Taco design) &#123;</span><br><span class="line">        this.tacos.add(design);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    @PrePersist</span><br><span class="line">    void placedAt() &#123;</span><br><span class="line">        this.placedAt = new Date();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>@Table。这指定订单实体应该持久化到数据库中名为 Taco_Order 的表中。</p>
<h4 id="声明-JPA-repository"><a href="#声明-JPA-repository" class="headerlink" title="声明 JPA repository"></a>声明 JPA repository</h4><h5 id="声明-IngredientRepository"><a href="#声明-IngredientRepository" class="headerlink" title="声明 IngredientRepository"></a>声明 IngredientRepository</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">package tacos.data;</span><br><span class="line">​</span><br><span class="line">import org.springframework.data.repository.CrudRepository;</span><br><span class="line">import tacos.Ingredient;</span><br><span class="line">​</span><br><span class="line">public interface IngredientRepository extends CrudRepository&lt;Ingredient, String&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>扩展CrudRepository<br>CrudRepository 为 CRUD（创建、读取、更新、删除）操作声明了十几个方法。注意，它是参数化的，第一个参数是存储库要持久化的实体类型，第二个参数是实体 id 属性的类型。对于 IngredientRepository，参数应该是 Ingredient 和 String 类型。</p>
<h5 id="声明-TacoRepository"><a href="#声明-TacoRepository" class="headerlink" title="声明  TacoRepository"></a>声明  TacoRepository</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">package tacos.data;</span><br><span class="line">​</span><br><span class="line">import org.springframework.data.repository.CrudRepository;</span><br><span class="line">import tacos.Taco;</span><br><span class="line">​</span><br><span class="line">public interface TacoRepository extends CrudRepository&lt;Taco, Long&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="声明OrderRepository"><a href="#声明OrderRepository" class="headerlink" title="声明OrderRepository"></a>声明OrderRepository</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">package tacos.data;</span><br><span class="line">​</span><br><span class="line">import org.springframework.data.repository.CrudRepository;</span><br><span class="line">import tacos.Order;</span><br><span class="line">​</span><br><span class="line">public interface OrderRepository extends CrudRepository&lt;Order, Long&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="关于自定义-JPA-repository"><a href="#关于自定义-JPA-repository" class="headerlink" title="关于自定义 JPA repository"></a><a target="_blank" rel="noopener" href="https://github.com/PotoYang/spring-in-action-v5-translate/blob/master/di-3-zhang-chu-li-shu-ju/3.2-shi-yong-spring-data-jpa-chi-jiu-hua-shu-ju/3.2.4-zi-ding-yi-jpa-repository.md">关于自定义 JPA repository</a></h4><h4 id="更改控制器contorller"><a href="#更改控制器contorller" class="headerlink" title="更改控制器contorller"></a>更改控制器contorller</h4><h5 id="更改-DesignTacoController-java"><a href="#更改-DesignTacoController-java" class="headerlink" title="更改 DesignTacoController.java"></a>更改 DesignTacoController.java</h5><ol>
<li><p>将IngredientRepository，TacoRepository 注入 DesignTacoController.java中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">@Controller</span><br><span class="line">@RequestMapping(&quot;/design&quot;)</span><br><span class="line">@SessionAttributes(&quot;order&quot;)</span><br><span class="line">public class DesignTacoController &#123;</span><br><span class="line">    private final IngredientRepository ingredientRepo;</span><br><span class="line">    private TacoRepository designRepo;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    public DesignTacoController(</span><br><span class="line">        IngredientRepository ingredientRepo,</span><br><span class="line">        TacoRepository designRepo) &#123;</span><br><span class="line">        this.ingredientRepo = ingredientRepo;</span><br><span class="line">        this.designRepo = designRepo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">​</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>保存design</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@PostMapping</span><br><span class="line">   public String processDesign(</span><br><span class="line">       @Valid Taco design, Errors errors,</span><br><span class="line">       @ModelAttribute Order order) &#123;</span><br><span class="line"></span><br><span class="line">       if (errors.hasErrors()) &#123;</span><br><span class="line">           return &quot;design&quot;;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       Taco saved = designRepo.save(design);</span><br><span class="line">       order.addDesign(saved);</span><br><span class="line"></span><br><span class="line">       return &quot;redirect:/orders/current&quot;;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>添加转换器IngredientByIdConverter</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">package tacos.web;</span><br><span class="line"></span><br><span class="line">import java.util.Optional;</span><br><span class="line"></span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.core.convert.converter.Converter;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">import tacos.Ingredient;</span><br><span class="line">import tacos.data.IngredientRepository;</span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line">public class IngredientByIdConverter implements Converter&lt;String, Ingredient&gt; &#123;</span><br><span class="line"></span><br><span class="line">  private IngredientRepository ingredientRepo;</span><br><span class="line"></span><br><span class="line">  @Autowired</span><br><span class="line">  public IngredientByIdConverter(IngredientRepository ingredientRepo) &#123;</span><br><span class="line">    this.ingredientRepo = ingredientRepo;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  @Override</span><br><span class="line">  public Ingredient convert(String id) &#123;</span><br><span class="line">    Optional&lt;Ingredient&gt; optionalIngredient = ingredientRepo.findById(id);</span><br><span class="line">	return optionalIngredient.isPresent() ?</span><br><span class="line">		   optionalIngredient.get() : null;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h5 id="保存order，并删除缓存中的order"><a href="#保存order，并删除缓存中的order" class="headerlink" title="保存order，并删除缓存中的order"></a>保存order，并删除缓存中的order</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@PostMapping</span><br><span class="line">public String processOrder(@Valid Order order, Errors errors, SessionStatus sessionStatus) &#123;</span><br><span class="line">  if (errors.hasErrors()) &#123;</span><br><span class="line">    return &quot;orderForm&quot;;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  orderRepo.save(order);</span><br><span class="line">  sessionStatus.setComplete();</span><br><span class="line">  </span><br><span class="line">  return &quot;redirect:/&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://110.41.172.90/2023/05/11/spring-data-jpa-%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/" data-id="clhixaaf3000azgulcprjfuz9" data-title="spring data jpa 数据处理" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-in-Action/" rel="tag">Spring in Action</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-开发-Web-应用程序" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/10/%E5%BC%80%E5%8F%91-Web-%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/" class="article-date">
  <time class="dt-published" datetime="2023-05-10T02:48:56.000Z" itemprop="datePublished">2023-05-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/05/10/%E5%BC%80%E5%8F%91-Web-%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/">开发 Web 应用程序</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="开发-Web-应用程序"><a href="#开发-Web-应用程序" class="headerlink" title="开发 Web 应用程序"></a>开发 Web 应用程序</h3><h4 id="详细教程"><a href="#详细教程" class="headerlink" title="详细教程"></a>详细教程</h4><p><a target="_blank" rel="noopener" href="https://github.com/PotoYang/spring-in-action-v5-translate/tree/master/di-2-zhang-kai-fa-web-ying-yong-cheng-xu">spring in action Spring 入门详细教程请参考：https://github.com/PotoYang/spring-in-action-v5-translate/tree/master/di-2-zhang-kai-fa-web-ying-yong-cheng-xu</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/PotoYang/spring-in-action-v5-translate/tree/master/spring-in-action-5-samples-master">源码如下：https://github.com/PotoYang/spring-in-action-v5-translate/tree/master/spring-in-action-5-samples-master</a></p>
<h4 id="将要做的事情"><a href="#将要做的事情" class="headerlink" title="将要做的事情"></a>将要做的事情</h4><ul>
<li>在浏览器中展示模型数据</li>
<li>处理和验证表单输入</li>
</ul>
<h4 id="开始之前的事情"><a href="#开始之前的事情" class="headerlink" title="开始之前的事情"></a>开始之前的事情</h4><p>引入依赖</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">    &lt;optional&gt;true&lt;/optional&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<h4 id="创建DesignTacoController和OrderController"><a href="#创建DesignTacoController和OrderController" class="headerlink" title="创建DesignTacoController和OrderController"></a>创建DesignTacoController和OrderController</h4><h5 id="创建DesignTacoController"><a href="#创建DesignTacoController" class="headerlink" title="创建DesignTacoController"></a>创建DesignTacoController</h5><h6 id="创建Ingredient"><a href="#创建Ingredient" class="headerlink" title="创建Ingredient"></a>创建Ingredient</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">package tacos;</span><br><span class="line"></span><br><span class="line">import lombok.Data;</span><br><span class="line">import lombok.RequiredArgsConstructor;</span><br><span class="line"></span><br><span class="line">@Data</span><br><span class="line">@RequiredArgsConstructor</span><br><span class="line">public class Ingredient &#123;</span><br><span class="line">    private final String id;</span><br><span class="line">    private final String name;</span><br><span class="line">    private final Type type;</span><br><span class="line">    public static enum Type&#123;</span><br><span class="line">        WRAP,PROTEIN,VEGGIES,CHEESE,SAUCE</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="创建Taco"><a href="#创建Taco" class="headerlink" title="创建Taco"></a>创建Taco</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">package tacos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import lombok.Data;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import java.util.List;</span><br><span class="line">@Data</span><br><span class="line">public class Taco &#123;</span><br><span class="line">    </span><br><span class="line">    private String name;</span><br><span class="line">   </span><br><span class="line">    private List&lt;String&gt; ingredients;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="创建控制器-DesignTacoController"><a href="#创建控制器-DesignTacoController" class="headerlink" title="创建控制器 DesignTacoController"></a>创建控制器 DesignTacoController</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">package tacos.web;</span><br><span class="line">​</span><br><span class="line">import java.util.Arrays;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.stream.Collectors;</span><br><span class="line">import javax.validation.Valid;</span><br><span class="line">import org.springframework.stereotype.Controller;</span><br><span class="line">import org.springframework.ui.Model;</span><br><span class="line">import org.springframework.validation.Errors;</span><br><span class="line">import org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line">import lombok.extern.slf4j.Slf4j;</span><br><span class="line">​</span><br><span class="line">import tacos.Taco;</span><br><span class="line">import tacos.Ingredient;</span><br><span class="line">import tacos.Ingredient.Type;</span><br><span class="line">​</span><br><span class="line">@Slf4j</span><br><span class="line">@Controller</span><br><span class="line">@RequestMapping(&quot;/design&quot;)</span><br><span class="line">public class DesignTacoController &#123;</span><br><span class="line">    @GetMapping</span><br><span class="line">    public String showDesignForm(Model model) &#123;</span><br><span class="line">        List&lt;Ingredient&gt; ingredients = Arrays.asList(</span><br><span class="line">            new Ingredient(&quot;FLTO&quot;, &quot;Flour Tortilla&quot;, Type.WRAP),</span><br><span class="line">            new Ingredient(&quot;COTO&quot;, &quot;Corn Tortilla&quot;, Type.WRAP),</span><br><span class="line">            new Ingredient(&quot;GRBF&quot;, &quot;Ground Beef&quot;, Type.PROTEIN),</span><br><span class="line">            new Ingredient(&quot;CARN&quot;, &quot;Carnitas&quot;, Type.PROTEIN),</span><br><span class="line">            new Ingredient(&quot;TMTO&quot;, &quot;Diced Tomatoes&quot;, Type.VEGGIES),</span><br><span class="line">            new Ingredient(&quot;LETC&quot;, &quot;Lettuce&quot;, Type.VEGGIES),</span><br><span class="line">            new Ingredient(&quot;CHED&quot;, &quot;Cheddar&quot;, Type.CHEESE),</span><br><span class="line">            new Ingredient(&quot;JACK&quot;, &quot;Monterrey Jack&quot;, Type.CHEESE),</span><br><span class="line">            new Ingredient(&quot;SLSA&quot;, &quot;Salsa&quot;, Type.SAUCE),</span><br><span class="line">            new Ingredient(&quot;SRCR&quot;, &quot;Sour Cream&quot;, Type.SAUCE)</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        Type[] types = Ingredient.Type.values();</span><br><span class="line">        for (Type type : types) &#123;</span><br><span class="line">            model.addAttribute(type.toString().toLowerCase(),</span><br><span class="line">                filterByType(ingredients, type));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        model.addAttribute(&quot;design&quot;, new Taco());</span><br><span class="line">        return &quot;design&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // provided by &#x27;aexiaosong&#x27;</span><br><span class="line">    private List&lt;Ingredient&gt; filterByType(List&lt;Ingredient&gt; ingredients, Type type) &#123;</span><br><span class="line">        return ingredients.stream().filter(x -&gt; x.getType().equals(type)).collect(Collectors.toList());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="添加design-html-到-resources-x2F-templates-下"><a href="#添加design-html-到-resources-x2F-templates-下" class="headerlink" title="添加design.html 到 resources&#x2F;templates 下"></a>添加design.html 到 resources&#x2F;templates 下</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;</span><br><span class="line">      xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;title&gt;Taco Cloud&lt;/title&gt;</span><br><span class="line">        &lt;link rel=&quot;stylesheet&quot; th:href=&quot;@&#123;/styles.css&#125;&quot; /&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;h1&gt;Design your taco!&lt;/h1&gt;</span><br><span class="line">        &lt;img th:src=&quot;@&#123;/images/TacoCloud.png&#125;&quot;/&gt;</span><br><span class="line">        &lt;form method=&quot;POST&quot; th:object=&quot;$&#123;design&#125;&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;grid&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;ingredient-group&quot; id=&quot;wraps&quot;&gt;</span><br><span class="line">                    &lt;h3&gt;Designate your wrap:&lt;/h3&gt;</span><br><span class="line">                    &lt;div th:each=&quot;ingredient : $&#123;wrap&#125;&quot;&gt;</span><br><span class="line">                        &lt;input name=&quot;ingredients&quot; type=&quot;checkbox&quot; th:value=&quot;$&#123;ingredient.id&#125;&quot;/&gt;</span><br><span class="line">                        &lt;span th:text=&quot;$&#123;ingredient.name&#125;&quot;&gt;INGREDIENT&lt;/span&gt;&lt;br/&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;ingredient-group&quot; id=&quot;proteins&quot;&gt;</span><br><span class="line">                    &lt;h3&gt;Pick your protein:&lt;/h3&gt;</span><br><span class="line">                    &lt;div th:each=&quot;ingredient : $&#123;protein&#125;&quot;&gt;</span><br><span class="line">                        &lt;input name=&quot;ingredients&quot; type=&quot;checkbox&quot; th:value=&quot;$&#123;ingredient.id&#125;&quot; /&gt;</span><br><span class="line">                        &lt;span th:text=&quot;$&#123;ingredient.name&#125;&quot;&gt;INGREDIENT&lt;/span&gt;&lt;br/&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;ingredient-group&quot; id=&quot;cheeses&quot;&gt;</span><br><span class="line">                    &lt;h3&gt;Choose your cheese:&lt;/h3&gt;</span><br><span class="line">                    &lt;div th:each=&quot;ingredient : $&#123;cheese&#125;&quot;&gt;</span><br><span class="line">                        &lt;input name=&quot;ingredients&quot; type=&quot;checkbox&quot; th:value=&quot;$&#123;ingredient.id&#125;&quot;/&gt;</span><br><span class="line">                        &lt;span th:text=&quot;$&#123;ingredient.name&#125;&quot;&gt;INGREDIENT&lt;/span&gt;&lt;br/&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;ingredient-group&quot; id=&quot;veggies&quot;&gt;</span><br><span class="line">                    &lt;h3&gt;Determine your veggies:&lt;/h3&gt;</span><br><span class="line">                    &lt;div th:each=&quot;ingredient : $&#123;veggies&#125;&quot;&gt;</span><br><span class="line">                        &lt;input name=&quot;ingredients&quot; type=&quot;checkbox&quot; th:value=&quot;$&#123;ingredient.id&#125;&quot;/&gt;</span><br><span class="line">                        &lt;span th:text=&quot;$&#123;ingredient.name&#125;&quot;&gt;INGREDIENT&lt;/span&gt;&lt;br/&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div class=&quot;ingredient-group&quot; id=&quot;sauces&quot;&gt;</span><br><span class="line">                    &lt;h3&gt;Select your sauce:&lt;/h3&gt;</span><br><span class="line">                    &lt;div th:each=&quot;ingredient : $&#123;sauce&#125;&quot;&gt;</span><br><span class="line">                        &lt;input name=&quot;ingredients&quot; type=&quot;checkbox&quot; th:value=&quot;$&#123;ingredient.id&#125;&quot;/&gt;</span><br><span class="line">                        &lt;span th:text=&quot;$&#123;ingredient.name&#125;&quot;&gt;INGREDIENT&lt;/span&gt;&lt;br/&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;h3&gt;Name your taco creation:&lt;/h3&gt;</span><br><span class="line">                &lt;input type=&quot;text&quot; th:field=&quot;*&#123;name&#125;&quot;/&gt;&lt;br/&gt;</span><br><span class="line">                &lt;button&gt;Submit your taco&lt;/button&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h6 id="启动tacos项目"><a href="#启动tacos项目" class="headerlink" title="启动tacos项目"></a>启动tacos项目</h6><p>浏览器中打开网址<a target="_blank" rel="noopener" href="http://localhost:8080/design">http://localhost:8080/design</a></p>
<h5 id="处理表单提交"><a href="#处理表单提交" class="headerlink" title="处理表单提交"></a>处理表单提交</h5><p>添加 post 请求的控制器，创建OrderController</p>
<h6 id="添加-post-请求的控制器"><a href="#添加-post-请求的控制器" class="headerlink" title="添加 post 请求的控制器"></a>添加 post 请求的控制器</h6><p>在src&#x2F;main&#x2F;java&#x2F;tacos&#x2F;web&#x2F;DesignTacoController.java中添加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@PostMapping</span><br><span class="line">public String processDesign(Taco design) &#123;</span><br><span class="line">    // Save the taco design...</span><br><span class="line">    // We&#x27;ll do this in chapter 3</span><br><span class="line">    log.info(&quot;Processing design: &quot; + design);</span><br><span class="line">    return &quot;redirect:/orders/current&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="添加OrderController-处理-GET-orders-x2F-current-请求"><a href="#添加OrderController-处理-GET-orders-x2F-current-请求" class="headerlink" title="添加OrderController 处理 GET:orders&#x2F;current 请求"></a>添加OrderController 处理 GET:orders&#x2F;current 请求</h6><p>创建Order .java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">package tacos;</span><br><span class="line">​</span><br><span class="line">import javax.validation.constraints.Digits;</span><br><span class="line">import javax.validation.constraints.Pattern;</span><br><span class="line">import org.hibernate.validator.constraints.CreditCardNumber;</span><br><span class="line">import org.hibernate.validator.constraints.NotBlank;</span><br><span class="line">import lombok.Data;</span><br><span class="line">​</span><br><span class="line">@Data</span><br><span class="line">public class Order &#123;</span><br><span class="line">    private String name;</span><br><span class="line">    private String street;</span><br><span class="line">    private String city;</span><br><span class="line">    private String state;</span><br><span class="line">    private String zip;</span><br><span class="line">    private String ccNumber;</span><br><span class="line">    private String ccExpiration;</span><br><span class="line">    private String ccCVV;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>创建OrderController.java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">package tacos.web;</span><br><span class="line">​</span><br><span class="line">import javax.validation.Valid;</span><br><span class="line">import org.springframework.stereotype.Controller;</span><br><span class="line">import org.springframework.ui.Model;</span><br><span class="line">import org.springframework.validation.Errors;</span><br><span class="line">import org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line">import lombok.extern.slf4j.Slf4j;</span><br><span class="line">import tacos.Order;</span><br><span class="line">​</span><br><span class="line">@Slf4j</span><br><span class="line">@Controller</span><br><span class="line">@RequestMapping(&quot;/orders&quot;)</span><br><span class="line">public class OrderController &#123;</span><br><span class="line">    @GetMapping(&quot;/current&quot;)</span><br><span class="line">    public String orderForm(Model model) &#123;</span><br><span class="line">        model.addAttribute(&quot;order&quot;, new Order());</span><br><span class="line">        return &quot;orderForm&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    @PostMapping</span><br><span class="line">    public String processOrder(Order order) &#123;</span><br><span class="line">        log.info(&quot;Order submitted: &quot; + order);</span><br><span class="line">        return &quot;redirect:/&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>添加orderForm.html 到 resources&#x2F;templates 下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;</span><br><span class="line">      xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;title&gt;Taco Cloud&lt;/title&gt;</span><br><span class="line">        &lt;link rel=&quot;stylesheet&quot; th:href=&quot;@&#123;/styles.css&#125;&quot; /&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line"></span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;form method=&quot;POST&quot; th:action=&quot;@&#123;/orders&#125;&quot; th:object=&quot;$&#123;order&#125;&quot;&gt;</span><br><span class="line">            &lt;h1&gt;Order your taco creations!&lt;/h1&gt;</span><br><span class="line">            &lt;img th:src=&quot;@&#123;/images/TacoCloud.png&#125;&quot;/&gt;</span><br><span class="line">            &lt;a th:href=&quot;@&#123;/design&#125;&quot; id=&quot;another&quot;&gt;Design another taco&lt;/a&gt;&lt;br/&gt;</span><br><span class="line">            &lt;div th:if=&quot;$&#123;#fields.hasErrors()&#125;&quot;&gt;</span><br><span class="line">                &lt;span class=&quot;validationError&quot;&gt;</span><br><span class="line">                    Please correct the problems below and resubmit.</span><br><span class="line">                &lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;h3&gt;Deliver my taco masterpieces to...&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line">            &lt;label for=&quot;name&quot;&gt;Name: &lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;text&quot; th:field=&quot;*&#123;name&#125;&quot;/&gt;</span><br><span class="line">            &lt;br/&gt;</span><br><span class="line"></span><br><span class="line">            &lt;label for=&quot;street&quot;&gt;Street address: &lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;text&quot; th:field=&quot;*&#123;street&#125;&quot;/&gt;</span><br><span class="line">            &lt;br/&gt;</span><br><span class="line"></span><br><span class="line">            &lt;label for=&quot;city&quot;&gt;City: &lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;text&quot; th:field=&quot;*&#123;city&#125;&quot;/&gt;</span><br><span class="line">            &lt;br/&gt;</span><br><span class="line"></span><br><span class="line">            &lt;label for=&quot;state&quot;&gt;State: &lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;text&quot; th:field=&quot;*&#123;state&#125;&quot;/&gt;</span><br><span class="line">            &lt;br/&gt;</span><br><span class="line"></span><br><span class="line">            &lt;label for=&quot;zip&quot;&gt;Zip code: &lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;text&quot; th:field=&quot;*&#123;zip&#125;&quot;/&gt;</span><br><span class="line">            &lt;br/&gt;</span><br><span class="line"></span><br><span class="line">            &lt;h3&gt;Here&#x27;s how I&#x27;ll pay...&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line">            &lt;label for=&quot;ccNumber&quot;&gt;Credit Card #: &lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;text&quot; th:field=&quot;*&#123;ccNumber&#125;&quot;/&gt;</span><br><span class="line">            &lt;br/&gt;</span><br><span class="line"></span><br><span class="line">            &lt;label for=&quot;ccExpiration&quot;&gt;Expiration: &lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;text&quot; th:field=&quot;*&#123;ccExpiration&#125;&quot;/&gt;</span><br><span class="line">            &lt;br/&gt;</span><br><span class="line"></span><br><span class="line">            &lt;label for=&quot;ccCVV&quot;&gt;CVV: &lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;text&quot; th:field=&quot;*&#123;ccCVV&#125;&quot;/&gt;</span><br><span class="line">            &lt;br/&gt;</span><br><span class="line"></span><br><span class="line">            &lt;input type=&quot;submit&quot; value=&quot;Submit order&quot;/&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>启动tacos项目，浏览器中打开网址<a target="_blank" rel="noopener" href="http://localhost:8080/design">http://localhost:8080/design</a>。点击<code>Submit Your Taco</code>。</p>
<h4 id="处理验证表单输入"><a href="#处理验证表单输入" class="headerlink" title="处理验证表单输入"></a>处理验证表单输入</h4><h5 id="修改Taco-java"><a href="#修改Taco-java" class="headerlink" title="修改Taco.java"></a>修改Taco.java</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">package tacos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import lombok.Data;</span><br><span class="line"></span><br><span class="line">import javax.validation.constraints.NotNull;</span><br><span class="line">import javax.validation.constraints.Size;</span><br><span class="line">import java.util.List;</span><br><span class="line">@Data</span><br><span class="line">public class Taco &#123;</span><br><span class="line">    @NotNull</span><br><span class="line">    @Size(min = 5,message=&quot;Name must be at least 5 characters long&quot;)</span><br><span class="line">    private String name;</span><br><span class="line">    @NotNull</span><br><span class="line">    @Size(min=1, message=&quot;You must choose at least 1 ingredient&quot;)</span><br><span class="line">    private List&lt;String&gt; ingredients;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="修改Order-java"><a href="#修改Order-java" class="headerlink" title="修改Order.java"></a>修改Order.java</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">package tacos;</span><br><span class="line"></span><br><span class="line">import javax.validation.constraints.Digits;</span><br><span class="line">import javax.validation.constraints.Pattern;</span><br><span class="line">import org.hibernate.validator.constraints.CreditCardNumber;</span><br><span class="line">import javax.validation.constraints.NotBlank;</span><br><span class="line">import lombok.Data;</span><br><span class="line"></span><br><span class="line">@Data</span><br><span class="line">public class Order &#123;</span><br><span class="line"></span><br><span class="line">    @NotBlank(message=&quot;Name is required&quot;)</span><br><span class="line">    private String name;</span><br><span class="line"></span><br><span class="line">    @NotBlank(message=&quot;Street is required&quot;)</span><br><span class="line">    private String street;</span><br><span class="line"></span><br><span class="line">    @NotBlank(message=&quot;City is required&quot;)</span><br><span class="line">    private String city;</span><br><span class="line"></span><br><span class="line">    @NotBlank(message=&quot;State is required&quot;)</span><br><span class="line">    private String state;</span><br><span class="line"></span><br><span class="line">    @NotBlank(message=&quot;Zip code is required&quot;)</span><br><span class="line">    private String zip;</span><br><span class="line"></span><br><span class="line">    @CreditCardNumber(message=&quot;Not a valid credit card number&quot;)</span><br><span class="line">    private String ccNumber;</span><br><span class="line"></span><br><span class="line">    @Pattern(regexp=&quot;^(0[1-9]|1[0-2])([\\/])([1-9][0-9])$&quot;,</span><br><span class="line">            message=&quot;Must be formatted MM/YY&quot;)</span><br><span class="line">    private String ccExpiration;</span><br><span class="line"></span><br><span class="line">    @Digits(integer=3, fraction=0, message=&quot;Invalid CVV&quot;)</span><br><span class="line">    private String ccCVV;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="修改DesignTacoController-java"><a href="#修改DesignTacoController-java" class="headerlink" title="修改DesignTacoController.java"></a>修改DesignTacoController.java</h5><p>@ModelAttribute 在处理GET&#x2F;POST请求之前，添加Model<br>@ModelAttribute(“design”)  Taco design，指定  Taco design 为Model中的<code>design</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">package tacos.web;</span><br><span class="line"></span><br><span class="line">import lombok.extern.slf4j.Slf4j;</span><br><span class="line">import org.springframework.stereotype.Controller;</span><br><span class="line">import org.springframework.ui.Model;</span><br><span class="line">import org.springframework.validation.Errors;</span><br><span class="line">import org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.ModelAttribute;</span><br><span class="line">import org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line">import tacos.Ingredient;</span><br><span class="line">import tacos.Ingredient.Type;</span><br><span class="line">import tacos.Taco;</span><br><span class="line"></span><br><span class="line">import javax.validation.Valid;</span><br><span class="line">import java.util.Arrays;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.stream.Collectors;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@Slf4j</span><br><span class="line">@Controller</span><br><span class="line">@RequestMapping(&quot;/design&quot;)</span><br><span class="line">public class DesignTacoController &#123;</span><br><span class="line">    @ModelAttribute</span><br><span class="line">    public void addIngredients(Model model)&#123;</span><br><span class="line">        List&lt;Ingredient&gt; ingredients = Arrays.asList(</span><br><span class="line">                new Ingredient(&quot;FLTO&quot;, &quot;Flour Tortilla&quot;, Type.WRAP),</span><br><span class="line">                new Ingredient(&quot;COTO&quot;, &quot;Corn Tortilla&quot;, Type.WRAP),</span><br><span class="line">                new Ingredient(&quot;GRBF&quot;, &quot;Ground Beef&quot;, Type.PROTEIN),</span><br><span class="line">                new Ingredient(&quot;CARN&quot;, &quot;Carnitas&quot;, Type.PROTEIN),</span><br><span class="line">                new Ingredient(&quot;TMTO&quot;, &quot;Diced Tomatoes&quot;, Type.VEGGIES),</span><br><span class="line">                new Ingredient(&quot;LETC&quot;, &quot;Lettuce&quot;, Type.VEGGIES),</span><br><span class="line">                new Ingredient(&quot;CHED&quot;, &quot;Cheddar&quot;, Type.CHEESE),</span><br><span class="line">                new Ingredient(&quot;JACK&quot;, &quot;Monterrey Jack&quot;, Type.CHEESE),</span><br><span class="line">                new Ingredient(&quot;SLSA&quot;, &quot;Salsa&quot;, Type.SAUCE),</span><br><span class="line">                new Ingredient(&quot;SRCR&quot;, &quot;Sour Cream&quot;, Type.SAUCE)</span><br><span class="line">        );</span><br><span class="line">        Type[] types = Ingredient.Type.values();</span><br><span class="line">        for(Type type: types)&#123;</span><br><span class="line">            model.addAttribute(type.toString().toLowerCase(), filterByType(ingredients, type));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    @GetMapping</span><br><span class="line">    private String getDesignForm(Model model)&#123;</span><br><span class="line">        model.addAttribute(&quot;design&quot;,new Taco());</span><br><span class="line">        return &quot;design&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private List&lt;Ingredient&gt; filterByType(List&lt;Ingredient&gt; ingredients, Type type) &#123;</span><br><span class="line">        return ingredients.stream().filter(x-&gt;x.getType().equals(type)).collect(Collectors.toList());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @PostMapping</span><br><span class="line">    public String processDesign(@Valid @ModelAttribute(&quot;design&quot;) Taco design, Errors errors,Model model) &#123;</span><br><span class="line">        if (errors.hasErrors()) &#123;</span><br><span class="line">            return &quot;design&quot;;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // Save the taco design...</span><br><span class="line">        // We&#x27;ll do this in chapter 3</span><br><span class="line">        log.info(&quot;Processing design: &quot; + design);</span><br><span class="line">        return &quot;redirect:/orders/current&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="修改OrderController-java"><a href="#修改OrderController-java" class="headerlink" title="修改OrderController.java"></a>修改OrderController.java</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">package tacos.web;</span><br><span class="line"></span><br><span class="line">import org.springframework.stereotype.Controller;</span><br><span class="line">import org.springframework.ui.Model;</span><br><span class="line">import org.springframework.validation.Errors;</span><br><span class="line">import org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.ModelAttribute;</span><br><span class="line">import org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line">import lombok.extern.slf4j.Slf4j;</span><br><span class="line">import tacos.Order;</span><br><span class="line"></span><br><span class="line">import javax.validation.Valid;</span><br><span class="line"></span><br><span class="line">@Slf4j</span><br><span class="line">@Controller</span><br><span class="line">@RequestMapping(&quot;/orders&quot;)</span><br><span class="line">public class OrderController &#123;</span><br><span class="line">    @GetMapping(&quot;/current&quot;)</span><br><span class="line">    public String orderForm(Model model) &#123;</span><br><span class="line">        model.addAttribute(&quot;order&quot;, new Order());</span><br><span class="line">        return &quot;orderForm&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @PostMapping</span><br><span class="line">    public String processOrder(@Valid @ModelAttribute(&quot;order&quot;) Order order, Errors errors) &#123;</span><br><span class="line">        if(errors.hasErrors())&#123;</span><br><span class="line">            return &quot;orderForm&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        log.info(&quot;Order submitted: &quot; + order);</span><br><span class="line">        return &quot;redirect:/&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>修改home.html</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; </span><br><span class="line">      xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;Taco Cloud&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;h1&gt;Welcome to...&lt;/h1&gt;</span><br><span class="line">    &lt;img th:src=&quot;@&#123;/images/TacoCloud.png&#125;&quot;/&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;a th:href=&quot;@&#123;/design&#125;&quot; id=&quot;design&quot;&gt;Design a taco&lt;/a&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>修改design.html</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- tag::all[] --&gt;</span><br><span class="line">&lt;!-- tag::head[] --&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;</span><br><span class="line">      xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;Taco Cloud&lt;/title&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; th:href=&quot;@&#123;/styles.css&#125;&quot; /&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line"></span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;h1&gt;Design your taco!&lt;/h1&gt;</span><br><span class="line">    &lt;img th:src=&quot;@&#123;/images/TacoCloud.png&#125;&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tag::formTag[] --&gt;</span><br><span class="line">    &lt;form method=&quot;POST&quot; th:object=&quot;$&#123;design&#125;&quot;&gt;</span><br><span class="line">    &lt;!-- end::all[] --&gt;</span><br><span class="line"></span><br><span class="line">    &lt;span class=&quot;validationError&quot;</span><br><span class="line">          th:if=&quot;$&#123;#fields.hasErrors(&#x27;ingredients&#x27;)&#125;&quot;</span><br><span class="line">          th:errors=&quot;*&#123;ingredients&#125;&quot;&gt;Ingredient Error&lt;/span&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- tag::all[] --&gt;</span><br><span class="line">    &lt;div class=&quot;grid&quot;&gt;</span><br><span class="line">&lt;!-- end::formTag[] --&gt;</span><br><span class="line">&lt;!-- end::head[] --&gt;</span><br><span class="line">      &lt;div class=&quot;ingredient-group&quot; id=&quot;wraps&quot;&gt;</span><br><span class="line">&lt;!-- tag::designateWrap[] --&gt;</span><br><span class="line">      &lt;h3&gt;Designate your wrap:&lt;/h3&gt;</span><br><span class="line">      &lt;div th:each=&quot;ingredient : $&#123;wrap&#125;&quot;&gt;</span><br><span class="line">        &lt;input name=&quot;ingredients&quot; type=&quot;checkbox&quot; th:value=&quot;$&#123;ingredient.id&#125;&quot; /&gt;</span><br><span class="line">        &lt;span th:text=&quot;$&#123;ingredient.name&#125;&quot;&gt;INGREDIENT&lt;/span&gt;&lt;br/&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">&lt;!-- end::designateWrap[] --&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">	  &lt;div class=&quot;ingredient-group&quot; id=&quot;proteins&quot;&gt;</span><br><span class="line">      &lt;h3&gt;Pick your protein:&lt;/h3&gt;</span><br><span class="line">      &lt;div th:each=&quot;ingredient : $&#123;protein&#125;&quot;&gt;</span><br><span class="line">        &lt;input name=&quot;ingredients&quot; type=&quot;checkbox&quot; th:value=&quot;$&#123;ingredient.id&#125;&quot; /&gt;</span><br><span class="line">        &lt;span th:text=&quot;$&#123;ingredient.name&#125;&quot;&gt;INGREDIENT&lt;/span&gt;&lt;br/&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">	  &lt;div class=&quot;ingredient-group&quot; id=&quot;cheeses&quot;&gt;</span><br><span class="line">      &lt;h3&gt;Choose your cheese:&lt;/h3&gt;</span><br><span class="line">      &lt;div th:each=&quot;ingredient : $&#123;cheese&#125;&quot;&gt;</span><br><span class="line">        &lt;input name=&quot;ingredients&quot; type=&quot;checkbox&quot; th:value=&quot;$&#123;ingredient.id&#125;&quot; /&gt;</span><br><span class="line">        &lt;span th:text=&quot;$&#123;ingredient.name&#125;&quot;&gt;INGREDIENT&lt;/span&gt;&lt;br/&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">	  &lt;div class=&quot;ingredient-group&quot; id=&quot;veggies&quot;&gt;</span><br><span class="line">      &lt;h3&gt;Determine your veggies:&lt;/h3&gt;</span><br><span class="line">      &lt;div th:each=&quot;ingredient : $&#123;veggies&#125;&quot;&gt;</span><br><span class="line">        &lt;input name=&quot;ingredients&quot; type=&quot;checkbox&quot; th:value=&quot;$&#123;ingredient.id&#125;&quot; /&gt;</span><br><span class="line">        &lt;span th:text=&quot;$&#123;ingredient.name&#125;&quot;&gt;INGREDIENT&lt;/span&gt;&lt;br/&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">	  &lt;div class=&quot;ingredient-group&quot; id=&quot;sauces&quot;&gt;</span><br><span class="line">      &lt;h3&gt;Select your sauce:&lt;/h3&gt;</span><br><span class="line">      &lt;div th:each=&quot;ingredient : $&#123;sauce&#125;&quot;&gt;</span><br><span class="line">        &lt;input name=&quot;ingredients&quot; type=&quot;checkbox&quot; th:value=&quot;$&#123;ingredient.id&#125;&quot; /&gt;</span><br><span class="line">        &lt;span th:text=&quot;$&#123;ingredient.name&#125;&quot;&gt;INGREDIENT&lt;/span&gt;&lt;br/&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">      &lt;div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      &lt;h3&gt;Name your taco creation:&lt;/h3&gt;</span><br><span class="line">      &lt;input type=&quot;text&quot; th:field=&quot;*&#123;name&#125;&quot;/&gt;</span><br><span class="line">      &lt;!-- end::all[] --&gt;</span><br><span class="line">      &lt;span th:text=&quot;$&#123;#fields.hasErrors(&#x27;name&#x27;)&#125;&quot;&gt;XXX&lt;/span&gt;</span><br><span class="line">      &lt;span class=&quot;validationError&quot;</span><br><span class="line">            th:if=&quot;$&#123;#fields.hasErrors(&#x27;name&#x27;)&#125;&quot;</span><br><span class="line">            th:errors=&quot;*&#123;name&#125;&quot;&gt;Name Error&lt;/span&gt;</span><br><span class="line">      &lt;!-- tag::all[] --&gt;</span><br><span class="line">      &lt;br/&gt;</span><br><span class="line"></span><br><span class="line">      &lt;button&gt;Submit your taco&lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">&lt;!-- tag::closeFormTag[] --&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;!-- end::closeFormTag[] --&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">&lt;!-- end::all[] --&gt;</span><br></pre></td></tr></table></figure>
<p>修改orderForm.html</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- tag::allButValidation[] --&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;</span><br><span class="line">      xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;Taco Cloud&lt;/title&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; th:href=&quot;@&#123;/styles.css&#125;&quot; /&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line"></span><br><span class="line">  &lt;body&gt;</span><br><span class="line"></span><br><span class="line">    &lt;form method=&quot;POST&quot; th:action=&quot;@&#123;/orders&#125;&quot; th:object=&quot;$&#123;order&#125;&quot;&gt;</span><br><span class="line">      &lt;h1&gt;Order your taco creations!&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">      &lt;img th:src=&quot;@&#123;/images/TacoCloud.png&#125;&quot;/&gt;</span><br><span class="line">      &lt;a th:href=&quot;@&#123;/design&#125;&quot; id=&quot;another&quot;&gt;Design another taco&lt;/a&gt;&lt;br/&gt;</span><br><span class="line"></span><br><span class="line">      &lt;div th:if=&quot;$&#123;#fields.hasErrors()&#125;&quot;&gt;</span><br><span class="line">        &lt;span class=&quot;validationError&quot;&gt;</span><br><span class="line">        Please correct the problems below and resubmit.</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">      &lt;h3&gt;Deliver my taco masterpieces to...&lt;/h3&gt;</span><br><span class="line">      &lt;label for=&quot;name&quot;&gt;Name: &lt;/label&gt;</span><br><span class="line">      &lt;input type=&quot;text&quot; th:field=&quot;*&#123;name&#125;&quot;/&gt;</span><br><span class="line">&lt;!-- end::allButValidation[] --&gt;</span><br><span class="line">      &lt;span class=&quot;validationError&quot;</span><br><span class="line">            th:if=&quot;$&#123;#fields.hasErrors(&#x27;name&#x27;)&#125;&quot;</span><br><span class="line">            th:errors=&quot;*&#123;name&#125;&quot;&gt;Name Error&lt;/span&gt;</span><br><span class="line">&lt;!-- tag::allButValidation[] --&gt;</span><br><span class="line">      &lt;br/&gt;</span><br><span class="line"></span><br><span class="line">      &lt;label for=&quot;street&quot;&gt;Street address: &lt;/label&gt;</span><br><span class="line">      &lt;input type=&quot;text&quot; th:field=&quot;*&#123;street&#125;&quot;/&gt;</span><br><span class="line">&lt;!-- end::allButValidation[] --&gt;</span><br><span class="line">      &lt;span class=&quot;validationError&quot;</span><br><span class="line">            th:if=&quot;$&#123;#fields.hasErrors(&#x27;street&#x27;)&#125;&quot;</span><br><span class="line">            th:errors=&quot;*&#123;street&#125;&quot;&gt;Street Error&lt;/span&gt;</span><br><span class="line">&lt;!-- tag::allButValidation[] --&gt;</span><br><span class="line">      &lt;br/&gt;</span><br><span class="line"></span><br><span class="line">      &lt;label for=&quot;city&quot;&gt;City: &lt;/label&gt;</span><br><span class="line">      &lt;input type=&quot;text&quot; th:field=&quot;*&#123;city&#125;&quot;/&gt;</span><br><span class="line">&lt;!-- end::allButValidation[] --&gt;</span><br><span class="line">      &lt;span class=&quot;validationError&quot;</span><br><span class="line">            th:if=&quot;$&#123;#fields.hasErrors(&#x27;city&#x27;)&#125;&quot;</span><br><span class="line">            th:errors=&quot;*&#123;city&#125;&quot;&gt;City Error&lt;/span&gt;</span><br><span class="line">&lt;!-- tag::allButValidation[] --&gt;</span><br><span class="line">      &lt;br/&gt;</span><br><span class="line"></span><br><span class="line">      &lt;label for=&quot;state&quot;&gt;State: &lt;/label&gt;</span><br><span class="line">      &lt;input type=&quot;text&quot; th:field=&quot;*&#123;state&#125;&quot;/&gt;</span><br><span class="line">&lt;!-- end::allButValidation[] --&gt;</span><br><span class="line">      &lt;span class=&quot;validationError&quot;</span><br><span class="line">            th:if=&quot;$&#123;#fields.hasErrors(&#x27;state&#x27;)&#125;&quot;</span><br><span class="line">            th:errors=&quot;*&#123;state&#125;&quot;&gt;State Error&lt;/span&gt;</span><br><span class="line">&lt;!-- tag::allButValidation[] --&gt;</span><br><span class="line">      &lt;br/&gt;</span><br><span class="line"></span><br><span class="line">      &lt;label for=&quot;zip&quot;&gt;Zip code: &lt;/label&gt;</span><br><span class="line">      &lt;input type=&quot;text&quot; th:field=&quot;*&#123;zip&#125;&quot;/&gt;</span><br><span class="line">&lt;!-- end::allButValidation[] --&gt;</span><br><span class="line">      &lt;span class=&quot;validationError&quot;</span><br><span class="line">            th:if=&quot;$&#123;#fields.hasErrors(&#x27;zip&#x27;)&#125;&quot;</span><br><span class="line">            th:errors=&quot;*&#123;zip&#125;&quot;&gt;Zip Error&lt;/span&gt;</span><br><span class="line">&lt;!-- tag::allButValidation[] --&gt;</span><br><span class="line">      &lt;br/&gt;</span><br><span class="line"></span><br><span class="line">      &lt;h3&gt;Here&#x27;s how I&#x27;ll pay...&lt;/h3&gt;</span><br><span class="line">&lt;!-- tag::validatedField[] --&gt;</span><br><span class="line">      &lt;label for=&quot;ccNumber&quot;&gt;Credit Card #: &lt;/label&gt;</span><br><span class="line">      &lt;input type=&quot;text&quot; th:field=&quot;*&#123;ccNumber&#125;&quot;/&gt;</span><br><span class="line">&lt;!-- end::allButValidation[] --&gt;</span><br><span class="line">      &lt;span class=&quot;validationError&quot;</span><br><span class="line">            th:if=&quot;$&#123;#fields.hasErrors(&#x27;ccNumber&#x27;)&#125;&quot;</span><br><span class="line">            th:errors=&quot;*&#123;ccNumber&#125;&quot;&gt;CC Num Error&lt;/span&gt;</span><br><span class="line">&lt;!-- tag::allButValidation[] --&gt;</span><br><span class="line">&lt;!-- end::validatedField[] --&gt;</span><br><span class="line">      &lt;br/&gt;</span><br><span class="line"></span><br><span class="line">      &lt;label for=&quot;ccExpiration&quot;&gt;Expiration: &lt;/label&gt;</span><br><span class="line">      &lt;input type=&quot;text&quot; th:field=&quot;*&#123;ccExpiration&#125;&quot;/&gt;</span><br><span class="line">&lt;!-- end::allButValidation[] --&gt;</span><br><span class="line">      &lt;span class=&quot;validationError&quot;</span><br><span class="line">            th:if=&quot;$&#123;#fields.hasErrors(&#x27;ccExpiration&#x27;)&#125;&quot;</span><br><span class="line">            th:errors=&quot;*&#123;ccExpiration&#125;&quot;&gt;CC Num Error&lt;/span&gt;</span><br><span class="line">&lt;!-- tag::allButValidation[] --&gt;</span><br><span class="line">      &lt;br/&gt;</span><br><span class="line"></span><br><span class="line">      &lt;label for=&quot;ccCVV&quot;&gt;CVV: &lt;/label&gt;</span><br><span class="line">      &lt;input type=&quot;text&quot; th:field=&quot;*&#123;ccCVV&#125;&quot;/&gt;</span><br><span class="line">&lt;!-- end::allButValidation[] --&gt;</span><br><span class="line">      &lt;span class=&quot;validationError&quot;</span><br><span class="line">            th:if=&quot;$&#123;#fields.hasErrors(&#x27;ccCVV&#x27;)&#125;&quot;</span><br><span class="line">            th:errors=&quot;*&#123;ccCVV&#125;&quot;&gt;CC Num Error&lt;/span&gt;</span><br><span class="line">&lt;!-- tag::allButValidation[] --&gt;</span><br><span class="line">      &lt;br/&gt;</span><br><span class="line"></span><br><span class="line">      &lt;input type=&quot;submit&quot; value=&quot;Submit order&quot;/&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">&lt;!-- end::allButValidation[] --&gt;</span><br></pre></td></tr></table></figure>
<p>添加styles.css到resources&#x2F;static下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">div.ingredient-group:nth-child(odd) &#123;</span><br><span class="line">	float: left;</span><br><span class="line">	padding-right: 20px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div.ingredient-group:nth-child(even) &#123;</span><br><span class="line">    float: left;</span><br><span class="line">	padding-right: 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div.ingredient-group &#123;</span><br><span class="line">	width: 50%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.grid:after &#123;</span><br><span class="line">  content: &quot;&quot;;</span><br><span class="line">  display: table;</span><br><span class="line">  clear: both;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">*, *:after, *:before &#123;</span><br><span class="line">  -webkit-box-sizing: border-box;</span><br><span class="line">  -moz-box-sizing: border-box;</span><br><span class="line">  box-sizing: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">span.validationError &#123;</span><br><span class="line">	color: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="重新启动项目"><a href="#重新启动项目" class="headerlink" title="重新启动项目"></a>重新启动项目</h4><p>浏览器中打开网址<a target="_blank" rel="noopener" href="http://localhost:8080/">http://localhost:8080</a></p>
<h4 id="添加测试类"><a href="#添加测试类" class="headerlink" title="添加测试类"></a>添加测试类</h4><p>添加测试类src&#x2F;test&#x2F;java&#x2F;tacos&#x2F;DesignTacoControllerTest.java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">package tacos;</span><br><span class="line"></span><br><span class="line">import org.junit.Before;</span><br><span class="line">import org.junit.Test;</span><br><span class="line">import org.junit.runner.RunWith;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;</span><br><span class="line">import org.springframework.http.MediaType;</span><br><span class="line">import org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line">import org.springframework.test.web.servlet.MockMvc;</span><br><span class="line">import tacos.Ingredient.Type;</span><br><span class="line">import tacos.web.DesignTacoController;</span><br><span class="line"></span><br><span class="line">import java.util.Arrays;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;</span><br><span class="line">import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.post;</span><br><span class="line">import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@RunWith(SpringRunner.class)</span><br><span class="line">@WebMvcTest(DesignTacoController.class)</span><br><span class="line">public class DesignTacoControllerTest &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  @Autowired</span><br><span class="line">  private MockMvc mockMvc;</span><br><span class="line">  </span><br><span class="line">  private List&lt;Ingredient&gt; ingredients;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  private Taco design;</span><br><span class="line"></span><br><span class="line">  @Before</span><br><span class="line">  public void setup() &#123;</span><br><span class="line">    ingredients = Arrays.asList(</span><br><span class="line">      new Ingredient(&quot;FLTO&quot;, &quot;Flour Tortilla&quot;, Type.WRAP),</span><br><span class="line">      new Ingredient(&quot;COTO&quot;, &quot;Corn Tortilla&quot;, Type.WRAP),</span><br><span class="line">      new Ingredient(&quot;GRBF&quot;, &quot;Ground Beef&quot;, Type.PROTEIN),</span><br><span class="line">      new Ingredient(&quot;CARN&quot;, &quot;Carnitas&quot;, Type.PROTEIN),</span><br><span class="line">      new Ingredient(&quot;TMTO&quot;, &quot;Diced Tomatoes&quot;, Type.VEGGIES),</span><br><span class="line">      new Ingredient(&quot;LETC&quot;, &quot;Lettuce&quot;, Type.VEGGIES),</span><br><span class="line">      new Ingredient(&quot;CHED&quot;, &quot;Cheddar&quot;, Type.CHEESE),</span><br><span class="line">      new Ingredient(&quot;JACK&quot;, &quot;Monterrey Jack&quot;, Type.CHEESE),</span><br><span class="line">      new Ingredient(&quot;SLSA&quot;, &quot;Salsa&quot;, Type.SAUCE),</span><br><span class="line">      new Ingredient(&quot;SRCR&quot;, &quot;Sour Cream&quot;, Type.SAUCE)</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    design = new Taco();</span><br><span class="line">    design.setName(&quot;Test Taco&quot;);</span><br><span class="line">    design.setIngredients(Arrays.asList(&quot;FLTO&quot;, &quot;GRBF&quot;, &quot;CHED&quot;));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @Test</span><br><span class="line">  public void testShowDesignForm() throws Exception &#123;</span><br><span class="line">    mockMvc.perform(get(&quot;/design&quot;))</span><br><span class="line">        .andExpect(status().isOk())</span><br><span class="line">        .andExpect(view().name(&quot;design&quot;))</span><br><span class="line">        .andExpect(model().attribute(&quot;wrap&quot;, ingredients.subList(0, 2)))</span><br><span class="line">        .andExpect(model().attribute(&quot;protein&quot;, ingredients.subList(2, 4)))</span><br><span class="line">        .andExpect(model().attribute(&quot;veggies&quot;, ingredients.subList(4, 6)))</span><br><span class="line">        .andExpect(model().attribute(&quot;cheese&quot;, ingredients.subList(6, 8)))</span><br><span class="line">        .andExpect(model().attribute(&quot;sauce&quot;, ingredients.subList(8, 10)));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @Test</span><br><span class="line">  public void processDesign() throws Exception &#123;</span><br><span class="line">    mockMvc.perform(post(&quot;/design&quot;)</span><br><span class="line">        .content(&quot;name=Test+Taco&amp;ingredients=FLTO,GRBF,CHED&quot;)</span><br><span class="line">        .contentType(MediaType.APPLICATION_FORM_URLENCODED))</span><br><span class="line">        .andExpect(status().is3xxRedirection())</span><br><span class="line">        .andExpect(header().stringValues(&quot;Location&quot;, &quot;/orders/current&quot;));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>添加测试类src&#x2F;test&#x2F;java&#x2F;tacos&#x2F;DesignAndOrderTacosBrowserTest.java</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br></pre></td><td class="code"><pre><span class="line">package tacos;</span><br><span class="line"></span><br><span class="line">import org.junit.AfterClass;</span><br><span class="line">import org.junit.BeforeClass;</span><br><span class="line">import org.junit.Test;</span><br><span class="line">import org.junit.runner.RunWith;</span><br><span class="line">import org.openqa.selenium.By;</span><br><span class="line">import org.openqa.selenium.WebElement;</span><br><span class="line">import org.openqa.selenium.htmlunit.HtmlUnitDriver;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line">import org.springframework.boot.test.context.SpringBootTest.WebEnvironment;</span><br><span class="line">import org.springframework.boot.test.web.client.TestRestTemplate;</span><br><span class="line">import org.springframework.boot.web.server.LocalServerPort;</span><br><span class="line">import org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line"></span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.concurrent.TimeUnit;</span><br><span class="line">import java.util.stream.Collectors;</span><br><span class="line"></span><br><span class="line">import static org.junit.Assert.assertEquals;</span><br><span class="line">import static org.junit.Assert.assertTrue;</span><br><span class="line"></span><br><span class="line">@RunWith(SpringRunner.class)</span><br><span class="line">@SpringBootTest(webEnvironment = WebEnvironment.RANDOM_PORT)</span><br><span class="line">public class DesignAndOrderTacosBrowserTest &#123;</span><br><span class="line">  </span><br><span class="line">  private static HtmlUnitDriver browser;</span><br><span class="line">  </span><br><span class="line">  @LocalServerPort</span><br><span class="line">  private int port;</span><br><span class="line">  </span><br><span class="line">  @Autowired</span><br><span class="line">  TestRestTemplate rest;</span><br><span class="line">  </span><br><span class="line">  @BeforeClass</span><br><span class="line">  public static void setup() &#123;</span><br><span class="line">    browser = new HtmlUnitDriver();</span><br><span class="line">    browser.manage().timeouts()</span><br><span class="line">        .implicitlyWait(10, TimeUnit.SECONDS);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  @AfterClass</span><br><span class="line">  public static void closeBrowser() &#123;</span><br><span class="line">    browser.quit();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  @Test</span><br><span class="line">  public void testDesignATacoPage_HappyPath() throws Exception &#123;</span><br><span class="line">    browser.get(homePageUrl());</span><br><span class="line">    clickDesignATaco();</span><br><span class="line">    assertDesignPageElements();</span><br><span class="line">    buildAndSubmitATaco(&quot;Basic Taco&quot;, &quot;FLTO&quot;, &quot;GRBF&quot;, &quot;CHED&quot;, &quot;TMTO&quot;, &quot;SLSA&quot;);</span><br><span class="line">    clickBuildAnotherTaco();</span><br><span class="line">    buildAndSubmitATaco(&quot;Another Taco&quot;, &quot;COTO&quot;, &quot;CARN&quot;, &quot;JACK&quot;, &quot;LETC&quot;, &quot;SRCR&quot;);</span><br><span class="line">    fillInAndSubmitOrderForm();</span><br><span class="line">    assertEquals(homePageUrl(), browser.getCurrentUrl());</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  @Test</span><br><span class="line">  public void testDesignATacoPage_EmptyOrderInfo() throws Exception &#123;</span><br><span class="line">    browser.get(homePageUrl());</span><br><span class="line">    clickDesignATaco();</span><br><span class="line">    assertDesignPageElements();</span><br><span class="line">    buildAndSubmitATaco(&quot;Basic Taco&quot;, &quot;FLTO&quot;, &quot;GRBF&quot;, &quot;CHED&quot;, &quot;TMTO&quot;, &quot;SLSA&quot;);</span><br><span class="line">    submitEmptyOrderForm();</span><br><span class="line">    fillInAndSubmitOrderForm();</span><br><span class="line">    assertEquals(homePageUrl(), browser.getCurrentUrl());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @Test</span><br><span class="line">  public void testDesignATacoPage_InvalidOrderInfo() throws Exception &#123;</span><br><span class="line">    browser.get(homePageUrl());</span><br><span class="line">    clickDesignATaco();</span><br><span class="line">    assertDesignPageElements();</span><br><span class="line">    buildAndSubmitATaco(&quot;Basic Taco&quot;, &quot;FLTO&quot;, &quot;GRBF&quot;, &quot;CHED&quot;, &quot;TMTO&quot;, &quot;SLSA&quot;);</span><br><span class="line">    submitInvalidOrderForm();</span><br><span class="line">    fillInAndSubmitOrderForm();</span><br><span class="line">    assertEquals(homePageUrl(), browser.getCurrentUrl());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  //</span><br><span class="line">  // Browser test action methods</span><br><span class="line">  //</span><br><span class="line">  private void buildAndSubmitATaco(String name, String... ingredients) &#123;</span><br><span class="line">    assertDesignPageElements();</span><br><span class="line"></span><br><span class="line">    for (String ingredient : ingredients) &#123;</span><br><span class="line">      browser.findElementByCssSelector(&quot;input[value=&#x27;&quot; + ingredient + &quot;&#x27;]&quot;).click();      </span><br><span class="line">    &#125;</span><br><span class="line">    browser.findElementByCssSelector(&quot;input#name&quot;).sendKeys(name);</span><br><span class="line">    browser.findElementByCssSelector(&quot;form&quot;).submit();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  private void assertDesignPageElements() &#123;</span><br><span class="line">    assertEquals(designPageUrl(), browser.getCurrentUrl());</span><br><span class="line">    List&lt;WebElement&gt; ingredientGroups = browser.findElementsByClassName(&quot;ingredient-group&quot;);</span><br><span class="line">    assertEquals(5, ingredientGroups.size());</span><br><span class="line">    </span><br><span class="line">    WebElement wrapGroup = browser.findElementByCssSelector(&quot;div.ingredient-group#wraps&quot;);</span><br><span class="line">    List&lt;WebElement&gt; wraps = wrapGroup.findElements(By.tagName(&quot;div&quot;));</span><br><span class="line">    assertEquals(2, wraps.size());</span><br><span class="line">    assertIngredient(wrapGroup, 0, &quot;FLTO&quot;, &quot;Flour Tortilla&quot;);</span><br><span class="line">    assertIngredient(wrapGroup, 1, &quot;COTO&quot;, &quot;Corn Tortilla&quot;);</span><br><span class="line">    </span><br><span class="line">    WebElement proteinGroup = browser.findElementByCssSelector(&quot;div.ingredient-group#proteins&quot;);</span><br><span class="line">    List&lt;WebElement&gt; proteins = proteinGroup.findElements(By.tagName(&quot;div&quot;));</span><br><span class="line">    assertEquals(2, proteins.size());</span><br><span class="line">    assertIngredient(proteinGroup, 0, &quot;GRBF&quot;, &quot;Ground Beef&quot;);</span><br><span class="line">    assertIngredient(proteinGroup, 1, &quot;CARN&quot;, &quot;Carnitas&quot;);</span><br><span class="line"></span><br><span class="line">    WebElement cheeseGroup = browser.findElementByCssSelector(&quot;div.ingredient-group#cheeses&quot;);</span><br><span class="line">    List&lt;WebElement&gt; cheeses = proteinGroup.findElements(By.tagName(&quot;div&quot;));</span><br><span class="line">    assertEquals(2, cheeses.size());</span><br><span class="line">    assertIngredient(cheeseGroup, 0, &quot;CHED&quot;, &quot;Cheddar&quot;);</span><br><span class="line">    assertIngredient(cheeseGroup, 1, &quot;JACK&quot;, &quot;Monterrey Jack&quot;);</span><br><span class="line"></span><br><span class="line">    WebElement veggieGroup = browser.findElementByCssSelector(&quot;div.ingredient-group#veggies&quot;);</span><br><span class="line">    List&lt;WebElement&gt; veggies = proteinGroup.findElements(By.tagName(&quot;div&quot;));</span><br><span class="line">    assertEquals(2, veggies.size());</span><br><span class="line">    assertIngredient(veggieGroup, 0, &quot;TMTO&quot;, &quot;Diced Tomatoes&quot;);</span><br><span class="line">    assertIngredient(veggieGroup, 1, &quot;LETC&quot;, &quot;Lettuce&quot;);</span><br><span class="line"></span><br><span class="line">    WebElement sauceGroup = browser.findElementByCssSelector(&quot;div.ingredient-group#sauces&quot;);</span><br><span class="line">    List&lt;WebElement&gt; sauces = proteinGroup.findElements(By.tagName(&quot;div&quot;));</span><br><span class="line">    assertEquals(2, sauces.size());</span><br><span class="line">    assertIngredient(sauceGroup, 0, &quot;SLSA&quot;, &quot;Salsa&quot;);</span><br><span class="line">    assertIngredient(sauceGroup, 1, &quot;SRCR&quot;, &quot;Sour Cream&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">  private void fillInAndSubmitOrderForm() &#123;</span><br><span class="line">    assertTrue(browser.getCurrentUrl().startsWith(orderDetailsPageUrl()));</span><br><span class="line">    fillField(&quot;input#name&quot;, &quot;Ima Hungry&quot;);</span><br><span class="line">    fillField(&quot;input#street&quot;, &quot;1234 Culinary Blvd.&quot;);</span><br><span class="line">    fillField(&quot;input#city&quot;, &quot;Foodsville&quot;);</span><br><span class="line">    fillField(&quot;input#state&quot;, &quot;CO&quot;);</span><br><span class="line">    fillField(&quot;input#zip&quot;, &quot;81019&quot;);</span><br><span class="line">    fillField(&quot;input#ccNumber&quot;, &quot;4111111111111111&quot;);</span><br><span class="line">    fillField(&quot;input#ccExpiration&quot;, &quot;10/19&quot;);</span><br><span class="line">    fillField(&quot;input#ccCVV&quot;, &quot;123&quot;);</span><br><span class="line">    browser.findElementByCssSelector(&quot;form&quot;).submit();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  private void submitEmptyOrderForm() &#123;</span><br><span class="line">    assertEquals(currentOrderDetailsPageUrl(), browser.getCurrentUrl());</span><br><span class="line">    browser.findElementByCssSelector(&quot;form&quot;).submit();</span><br><span class="line">    </span><br><span class="line">    assertEquals(orderDetailsPageUrl(), browser.getCurrentUrl());</span><br><span class="line"></span><br><span class="line">    List&lt;String&gt; validationErrors = getValidationErrorTexts();</span><br><span class="line">    assertEquals(9, validationErrors.size());</span><br><span class="line">    assertTrue(validationErrors.contains(&quot;Please correct the problems below and resubmit.&quot;));</span><br><span class="line">    assertTrue(validationErrors.contains(&quot;Name is required&quot;));</span><br><span class="line">    assertTrue(validationErrors.contains(&quot;Street is required&quot;));</span><br><span class="line">    assertTrue(validationErrors.contains(&quot;City is required&quot;));</span><br><span class="line">    assertTrue(validationErrors.contains(&quot;State is required&quot;));</span><br><span class="line">    assertTrue(validationErrors.contains(&quot;Zip code is required&quot;));</span><br><span class="line">    assertTrue(validationErrors.contains(&quot;Not a valid credit card number&quot;));</span><br><span class="line">    assertTrue(validationErrors.contains(&quot;Must be formatted MM/YY&quot;));</span><br><span class="line">    assertTrue(validationErrors.contains(&quot;Invalid CVV&quot;));    </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  private List&lt;String&gt; getValidationErrorTexts() &#123;</span><br><span class="line">    List&lt;WebElement&gt; validationErrorElements = browser.findElementsByClassName(&quot;validationError&quot;);</span><br><span class="line">    List&lt;String&gt; validationErrors = validationErrorElements.stream()</span><br><span class="line">        .map(el -&gt; el.getText())</span><br><span class="line">        .collect(Collectors.toList());</span><br><span class="line">    return validationErrors;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  private void submitInvalidOrderForm() &#123;</span><br><span class="line">    assertTrue(browser.getCurrentUrl().startsWith(orderDetailsPageUrl()));</span><br><span class="line">    fillField(&quot;input#name&quot;, &quot;I&quot;);</span><br><span class="line">    fillField(&quot;input#street&quot;, &quot;1&quot;);</span><br><span class="line">    fillField(&quot;input#city&quot;, &quot;F&quot;);</span><br><span class="line">    fillField(&quot;input#state&quot;, &quot;C&quot;);</span><br><span class="line">    fillField(&quot;input#zip&quot;, &quot;8&quot;);</span><br><span class="line">    fillField(&quot;input#ccNumber&quot;, &quot;1234432112344322&quot;);</span><br><span class="line">    fillField(&quot;input#ccExpiration&quot;, &quot;14/91&quot;);</span><br><span class="line">    fillField(&quot;input#ccCVV&quot;, &quot;1234&quot;);</span><br><span class="line">    browser.findElementByCssSelector(&quot;form&quot;).submit();</span><br><span class="line">    </span><br><span class="line">    assertEquals(orderDetailsPageUrl(), browser.getCurrentUrl());</span><br><span class="line"></span><br><span class="line">    List&lt;String&gt; validationErrors = getValidationErrorTexts();</span><br><span class="line">    assertEquals(4, validationErrors.size());</span><br><span class="line">    assertTrue(validationErrors.contains(&quot;Please correct the problems below and resubmit.&quot;));</span><br><span class="line">    assertTrue(validationErrors.contains(&quot;Not a valid credit card number&quot;));</span><br><span class="line">    assertTrue(validationErrors.contains(&quot;Must be formatted MM/YY&quot;));</span><br><span class="line">    assertTrue(validationErrors.contains(&quot;Invalid CVV&quot;));    </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  private void fillField(String fieldName, String value) &#123;</span><br><span class="line">    WebElement field = browser.findElementByCssSelector(fieldName);</span><br><span class="line">    field.clear();</span><br><span class="line">    field.sendKeys(value);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  private void assertIngredient(WebElement ingredientGroup, </span><br><span class="line">                                int ingredientIdx, String id, String name) &#123;</span><br><span class="line">    List&lt;WebElement&gt; proteins = ingredientGroup.findElements(By.tagName(&quot;div&quot;));</span><br><span class="line">    WebElement ingredient = proteins.get(ingredientIdx);</span><br><span class="line">    assertEquals(id, </span><br><span class="line">        ingredient.findElement(By.tagName(&quot;input&quot;)).getAttribute(&quot;value&quot;));</span><br><span class="line">    assertEquals(name, </span><br><span class="line">        ingredient.findElement(By.tagName(&quot;span&quot;)).getText());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  private void clickDesignATaco() &#123;</span><br><span class="line">    assertEquals(homePageUrl(), browser.getCurrentUrl());</span><br><span class="line">    browser.findElementByCssSelector(&quot;a[id=&#x27;design&#x27;]&quot;).click();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  private void clickBuildAnotherTaco() &#123;</span><br><span class="line">    assertTrue(browser.getCurrentUrl().startsWith(orderDetailsPageUrl()));</span><br><span class="line">    browser.findElementByCssSelector(&quot;a[id=&#x27;another&#x27;]&quot;).click();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">  //</span><br><span class="line">  // URL helper methods</span><br><span class="line">  //</span><br><span class="line">  private String designPageUrl() &#123;</span><br><span class="line">    return homePageUrl() + &quot;design&quot;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  private String homePageUrl() &#123;</span><br><span class="line">    return &quot;http://localhost:&quot; + port + &quot;/&quot;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  private String orderDetailsPageUrl() &#123;</span><br><span class="line">    return homePageUrl() + &quot;orders&quot;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  private String currentOrderDetailsPageUrl() &#123;</span><br><span class="line">    return homePageUrl() + &quot;orders/current&quot;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://110.41.172.90/2023/05/10/%E5%BC%80%E5%8F%91-Web-%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/" data-id="clhixaaf5000ezgul02fdazka" data-title="开发 Web 应用程序" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-in-Action/" rel="tag">Spring in Action</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Spring-入门（二）" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/09/Spring-%E5%85%A5%E9%97%A8%EF%BC%88%E4%BA%8C%EF%BC%89/" class="article-date">
  <time class="dt-published" datetime="2023-05-09T06:27:58.000Z" itemprop="datePublished">2023-05-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/05/09/Spring-%E5%85%A5%E9%97%A8%EF%BC%88%E4%BA%8C%EF%BC%89/">Spring 入门（二）</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="编写-Spring-应用程序"><a href="#编写-Spring-应用程序" class="headerlink" title="编写 Spring 应用程序"></a>编写 Spring 应用程序</h3><h4 id="详细教程"><a href="#详细教程" class="headerlink" title="详细教程"></a>详细教程</h4><p><a target="_blank" rel="noopener" href="https://github.com/PotoYang/spring-in-action-v5-translate/tree/master/di-1-zhang-spring-ru-men/1.3-bian-xie-spring-ying-yong-cheng-xu">spring in action Spring 入门详细教程请参考：https://github.com/PotoYang/spring-in-action-v5-translate/tree/master/di-1-zhang-spring-ru-men/1.3-bian-xie-spring-ying-yong-cheng-xu</a></p>
<h4 id="将要做的事情"><a href="#将要做的事情" class="headerlink" title="将要做的事情"></a>将要做的事情</h4><ul>
<li>添加主页：<br>  当你添加主页，你将创建两个代码构件：<ul>
<li>一个处理主页请求的控制器类</li>
<li>一个视图模板，定义了主页的外观</li>
</ul>
</li>
<li>编写一个简单的测试类来测试主页</li>
</ul>
<h4 id="创建控制器"><a href="#创建控制器" class="headerlink" title="创建控制器"></a>创建控制器</h4><p>创建HomeController </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">package tacos;</span><br><span class="line"></span><br><span class="line">import org.springframework.stereotype.Controller;</span><br><span class="line">import org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"></span><br><span class="line">@Controller</span><br><span class="line">public class HomeController &#123;</span><br><span class="line">    @GetMapping(&quot;/&quot;)</span><br><span class="line">    public String home()&#123;</span><br><span class="line">        return &quot;home&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>@Controller 本身并没有做多少事情。它的主要目的是将该类识别为组件扫描的组件。由于 HomeController 是用 @Controller 注释的，因此 Spring 的组件扫描会自动发现它，并在 Spring 应用程序上下文中创建一个 HomeController 实例作为 bean。</p>
<p>home() 方法与控制器方法一样简单。它使用 @GetMapping 进行注释，以指示如果接收到根路径 &#x2F; 的 HTTP GET 请求，则此方法应该处理该请求。除了返回 home 的 String 值外，它什么也不做。</p>
<h4 id="添加home-html视图模板"><a href="#添加home-html视图模板" class="headerlink" title="添加home.html视图模板"></a>添加home.html视图模板</h4><p>模板名称由逻辑视图名称派生而来，它的前缀是 &#x2F;templates&#x2F;，后缀是 .html。模板的结果路径是 &#x2F;templates&#x2F;home.html。因此，需要将模板放在项目的 &#x2F;src&#x2F;main&#x2F;resources&#x2F;templates&#x2F;home.html 中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; </span><br><span class="line">      xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;Taco Cloud&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;s</span><br><span class="line">  </span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;h1&gt;Welcome to...&lt;/h1&gt;</span><br><span class="line">    &lt;img th:src=&quot;@&#123;/images/TacoCloud.png&#125;&quot;/&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h4 id="编写测试类HomeControllerTest-java"><a href="#编写测试类HomeControllerTest-java" class="headerlink" title="编写测试类HomeControllerTest.java"></a>编写测试类HomeControllerTest.java</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">package tacos;</span><br><span class="line"></span><br><span class="line">import static org.hamcrest.Matchers.containsString;</span><br><span class="line">import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;</span><br><span class="line">import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.content;</span><br><span class="line">import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;</span><br><span class="line">import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.view;</span><br><span class="line"></span><br><span class="line">import org.junit.Test;</span><br><span class="line">import org.junit.runner.RunWith;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;</span><br><span class="line">import org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line">import org.springframework.test.web.servlet.MockMvc;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@RunWith(SpringRunner.class)</span><br><span class="line">@WebMvcTest(HomeController.class)</span><br><span class="line">public class HomeControllerTest &#123;</span><br><span class="line">    @Autowired</span><br><span class="line">    private MockMvc mockMvc;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void testHomePage() throws Exception&#123;</span><br><span class="line">        mockMvc.perform(get(&quot;/&quot;))</span><br><span class="line">                .andExpect(status().isOk())</span><br><span class="line">                .andExpect(view().name(&quot;home&quot;))</span><br><span class="line">                .andExpect(content().string(containsString(&quot;Welcome to...&quot;)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>@WebMvcTest这是 Spring Boot 提供的一个特殊测试注释，它安排测试在 Spring MVC 应用程序的上下文中运行。更具体地说，在本例中，它安排 HomeController 在 Spring MVC 中注册，这样你就可以对它进行请求。</p>
<h4 id="启动tacos项目"><a href="#启动tacos项目" class="headerlink" title="启动tacos项目"></a>启动tacos项目</h4><p>浏览器中打开网址<a target="_blank" rel="noopener" href="http://localhost:8080/">http://localhost:8080</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://110.41.172.90/2023/05/09/Spring-%E5%85%A5%E9%97%A8%EF%BC%88%E4%BA%8C%EF%BC%89/" data-id="clhixaaeu0001zgul95rh4cec" data-title="Spring 入门（二）" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-in-Action/" rel="tag">Spring in Action</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Spring-入门" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/09/Spring-%E5%85%A5%E9%97%A8/" class="article-date">
  <time class="dt-published" datetime="2023-05-09T03:13:22.000Z" itemprop="datePublished">2023-05-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/05/09/Spring-%E5%85%A5%E9%97%A8/">Spring 入门</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="Spring-入门"><a href="#Spring-入门" class="headerlink" title="Spring 入门"></a>Spring 入门</h3><h4 id="详细教程"><a href="#详细教程" class="headerlink" title="详细教程"></a>详细教程</h4><p><a target="_blank" rel="noopener" href="https://github.com/PotoYang/spring-in-action-v5-translate/tree/master/di-1-zhang-spring-ru-men">spring in action Spring 入门详细教程请参考：https://github.com/PotoYang/spring-in-action-v5-translate/tree/master/di-1-zhang-spring-ru-men</a></p>
<h4 id="spring-概览"><a href="#spring-概览" class="headerlink" title="spring 概览"></a>spring 概览</h4><ul>
<li>Spring 核心框架</li>
<li>Spring Boot</li>
<li>Spring Data</li>
<li>Spring Security</li>
<li>Spring Integration 和 Spring Batch</li>
<li>Spring Cloud</li>
</ul>
<h4 id="创建一个spring应用"><a href="#创建一个spring应用" class="headerlink" title="创建一个spring应用"></a>创建一个spring应用</h4><p>idea中创建一个spring项目<br>package设为tacos</p>
<h5 id="引入依赖"><a href="#引入依赖" class="headerlink" title="引入依赖"></a>引入依赖</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;</span><br><span class="line">    &lt;scope&gt;runtime&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<p>完整pom.xml如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;</span><br><span class="line">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0</span><br><span class="line">        http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;</span><br><span class="line">    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;groupId&gt;sia&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;taco-cloud&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;</span><br><span class="line">    &lt;packaging&gt;jar&lt;/packaging&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;name&gt;taco-cloud&lt;/name&gt;</span><br><span class="line">    &lt;description&gt;Taco Cloud Example&lt;/description&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;parent&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;2.0.4.RELEASE&lt;/version&gt;</span><br><span class="line">        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;</span><br><span class="line">    &lt;/parent&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;properties&gt;</span><br><span class="line">        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;</span><br><span class="line">        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;</span><br><span class="line">        &lt;java.version&gt;1.8&lt;/java.version&gt;</span><br><span class="line">    &lt;/properties&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;dependencies&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        </span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        </span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;</span><br><span class="line">            &lt;scope&gt;runtime&lt;/scope&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        </span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;</span><br><span class="line">            &lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        </span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;</span><br><span class="line">            &lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        </span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;htmlunit-driver&lt;/artifactId&gt;</span><br><span class="line">            &lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;/dependencies&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;build&gt;</span><br><span class="line">        &lt;plugins&gt;</span><br><span class="line">            &lt;plugin&gt;</span><br><span class="line">                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">            &lt;/plugin&gt;</span><br><span class="line">        &lt;/plugins&gt;</span><br><span class="line">    &lt;/build&gt;</span><br><span class="line">&lt;/project&gt;</span><br></pre></td></tr></table></figure>
<h5 id="查看默认引导类"><a href="#查看默认引导类" class="headerlink" title="查看默认引导类"></a>查看默认引导类</h5><p>引导类TacoCloudApplication 代码如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">package tacos;</span><br><span class="line"></span><br><span class="line">import org.springframework.boot.SpringApplication;</span><br><span class="line">import org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line">@SpringBootApplication</span><br><span class="line">public class TacoCloudApplication &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        SpringApplication.run(TacoCloudApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="查看默认测试类"><a href="#查看默认测试类" class="headerlink" title="查看默认测试类"></a>查看默认测试类</h5><p>修改测试类TacoCloudApplicationTests.java 为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">package tacos;</span><br><span class="line"></span><br><span class="line">import org.junit.Test;</span><br><span class="line">import org.junit.runner.RunWith;</span><br><span class="line">import org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line">import org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line">​</span><br><span class="line">@RunWith(SpringRunner.class)</span><br><span class="line">@SpringBootTest</span><br><span class="line">public class TacoCloudApplicationTests &#123;</span><br><span class="line">    @Test</span><br><span class="line">    public void contextLoads() &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行测试类 测试通过无异常</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://110.41.172.90/2023/05/09/Spring-%E5%85%A5%E9%97%A8/" data-id="clhixaaeu0000zgulfpve7mb1" data-title="Spring 入门" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-in-Action/" rel="tag">Spring in Action</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-spring boot 入门" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/04/17/spring%20boot%20%E5%85%A5%E9%97%A8/" class="article-date">
  <time class="dt-published" datetime="2023-04-17T06:23:39.000Z" itemprop="datePublished">2023-04-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/04/17/spring%20boot%20%E5%85%A5%E9%97%A8/">spring boot 入门</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="spring-boot-入门"><a href="#spring-boot-入门" class="headerlink" title="spring boot 入门"></a>spring boot 入门</h2><h3 id="构建spring-boot-项目"><a href="#构建spring-boot-项目" class="headerlink" title="构建spring boot 项目"></a>构建spring boot 项目</h3><p>使用start.spring.io使用gradle构建spring boot项目build.gradle中的依赖如下</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    implementation <span class="string">&#x27;org.springframework.boot:spring-boot-starter-web&#x27;</span></span><br><span class="line">    testImplementation <span class="string">&#x27;org.springframework.boot:spring-boot-starter-test&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="创建HelloController-class"><a href="#创建HelloController-class" class="headerlink" title="创建HelloController.class"></a>创建HelloController.class</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello, world!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="启动项目访问http-localhost-8080"><a href="#启动项目访问http-localhost-8080" class="headerlink" title="启动项目访问http://localhost:8080/"></a>启动项目访问<a target="_blank" rel="noopener" href="http://localhost:8080/">http://localhost:8080/</a></h3><p>得到返回信息Hello, world!</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://110.41.172.90/2023/04/17/spring%20boot%20%E5%85%A5%E9%97%A8/" data-id="clhixaaeu0003zgulcwmu97c0" data-title="spring boot 入门" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/spring-boot/" rel="tag">spring boot</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/04/17/hello-world/" class="article-date">
  <time class="dt-published" datetime="2023-04-17T01:57:06.571Z" itemprop="datePublished">2023-04-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/04/17/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://110.41.172.90/2023/04/17/hello-world/" data-id="clhixaaf00004zgulbawj8lb3" data-title="Hello World" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-in-Action/" rel="tag">Spring in Action</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring-boot/" rel="tag">spring boot</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Spring-in-Action/" style="font-size: 20px;">Spring in Action</a> <a href="/tags/spring-boot/" style="font-size: 10px;">spring boot</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/05/11/spring-security-%E5%A2%9E%E5%8A%A0%E7%99%BB%E5%BD%95%E5%92%8C%E5%AE%89%E5%85%A8%E4%BF%9D%E6%8A%A4/">spring security 增加登录和安全保护</a>
          </li>
        
          <li>
            <a href="/2023/05/11/spring-data-jpa-%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/">spring data jpa 数据处理</a>
          </li>
        
          <li>
            <a href="/2023/05/10/%E5%BC%80%E5%8F%91-Web-%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/">开发 Web 应用程序</a>
          </li>
        
          <li>
            <a href="/2023/05/09/Spring-%E5%85%A5%E9%97%A8%EF%BC%88%E4%BA%8C%EF%BC%89/">Spring 入门（二）</a>
          </li>
        
          <li>
            <a href="/2023/05/09/Spring-%E5%85%A5%E9%97%A8/">Spring 入门</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>